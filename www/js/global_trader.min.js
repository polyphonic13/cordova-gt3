/*! GlobalTrader3 v0.1.0 2014-07-18 */

function startGame(){PhaserGame.init(ASPECT_RATIO,document.documentElement.clientHeight)}!function(){"undefined"==typeof console||"undefined"==typeof console.log?console={log:function(){}}:console.log("----- Global Trader 3.0 created: 2014-07-18T20:41:22")}();var Events={CHANGE_SCREEN:"changeScreen",CHANGE_STATE:"changeState",SHOW_GROUP:"showGroup",HIDE_GROUP:"hideGroup",SWITCH_GROUP:"switchGroup",START_TURN:"startTurn",GAME_TIME_UPDATED:"gameTimeUpdated",TURN_COMPLETED:"turnCompleted",PAUSE_GAME:"pauseGame",RESUME_GAME:"resumeGame",INCREMENT_LEVEL:"incrementLevel",UPDATE_BANK:"updateBank",BANK_UPDATED:"bankUpdated",BONUSES_UPDATED:"bonusesUpdated",OPEN_NOTIFICATION:"openNotification",CLOSE_NOTIFICATION:"closeNotification",WORLD_ZOOMED_IN:"worldZoomedIn",WORLD_ZOOMED_OUT:"worldZoomedOut",OPEN_BUILDINGS_MENU:"openBuildingsMenu",CLOSE_BUILDINGS_MENU:"closeBuildingsMenu",ADD_BUILDING:"addBuilding",BUILDING_AGE_UPDATED:"buildingAgeUpdated",BUILDING_STATE_UPDATED:"buildingStateUpdated",ADD_DEALERSHIP_NOTIFICATION:"addDealershipNotification",CLOSE_DEALERSHIP_NOTIFICATION:"closeDealershipNotification",ADD_DEALERSHIP:"addDealership",ADD_SUPPLIER_NOTIFICATION:"addSupplierNotification",CLOSE_SUPPLIER_NOTIFICATION:"closeSupplierNotification",ADD_SUPPLIER:"addSupplier",ADD_TRADE_ROUTE_NOTIFICATION:"addTradeRouteNotification",CLOSE_TRADE_ROUTE_NOTIFICATION:"closeTradeRouteNotification",ADD_TRADE_ROUTE:"addTradeRoute",INVENTORY_ADDED:"inventoryAdded",MACHINE_SOLD:"machineSold",SHOW_BUILD_GROUP:"showBuildGroup",NEXT_MACHINE_PIECE_ICON:"nextMachinePieceIcon",PREV_MACHINE_PIECE_ICON:"prevMachinePieceIcon",MACHINE_TYPE_SELECTION:"machineTypeSelection",MACHINE_SIZE_SELECTION:"machineSizeSelection",REQUIRED_PART_ADDED:"requirePartAdded",MACHINE_PARTS_COMPLETE:"machinePartsComplete",OPEN_OPTIONAL_PARTS_MENU:"openOptionalPartsMenu",OPEN_PARTS_MENU:"openPartsMenu",CLOSE_PARTS_MENU:"closePartsMenu",OPEN_WHOLESALE_PARTS_MENU:"openWholesalePartsMenu",CLOSE_WHOLESALE_PARTS_MENU:"closeWholesalePartsMenu",ADD_PART:"addPart",ADD_WHOLESALE_PART:"addWholesalePart",ADD_OPTIONAL_PART:"addOptionalPart",SAVE_MACHINE:"saveMachine",EDIT_MACHINE:"editMachine",ADD_SUPPLIER_PROMPT:"addSupplierPrompt",ADD_SUPPLIER_NOTIFICATION:"addSupplierNotification"},TutorialTypes={INIT:"init",WORLD:"world",US_DETAIL:"usDetail",PLANT:"plant",PLANT_DETAILS:"plantDetails",EQUIPMENT_LIST:"equipmentList",EQUIPMENT_CREATE:"equipmentCreate",EQUIPMENT_EDIT:"equipmentEdit",DEALERSHIP:"dealership",SUPPLIER:"supplier",TRADE_ROUTE:"tradeRoute"},BuildingTypes={PLANT:"plant",DEALERSHIP:"dealership",SUPPLIER:"supplier",TRADE_ROUTE:"tradeRoute"},BuildingStates={CONSTRUCTION:"construction",ACTIVE:"active",PAUSED:"paused",INACTIVE:"inactive"},TileCellFrames={EMPTY:0,PLANT_CONSTRUCTION:1,PLANT_ACTIVE:2,PLANT_PAUSED:1,DEALERSHIP_CONSTRUCTION:3,DEALERSHIP_ACTIVE:4,DEALERSHIP_PAUSED:3},EquipmentActions={CREATE:"create",EDIT:"edit",DELETE:"delete"},EquipmentTypes={TRACTOR:"tractor",SKIDSTEER:"skidsteer"},EquipmentSizes={BASIC:"basic",MEDIUM:"medium",HEAVY:"heavy"},PartTypes={TIRES:"tires",ENGINE:"engine",TRANSMISSION:"transmission",HEADLIGHTS:"headlights",BUCKET:"bucket",TRACKS:"tracks",THREE_POINT_HITCH:"threePointHitch",POWER_TAKE_OFF:"powerTakeoff",QUICK_COUPLER:"quickCoupler"},OptionalPartTypes={CAB_HEATER:"cabHeater",AUTO_PILOT:"autoPilot",STAINLESS_EXHAUST:"stainlessExhaust",GPS:"gps",DECAL:"decal"},PartDescriptions={tires:"Tires",engine:"Engine",transmission:"Transmission",cab:"Cab",headlights:"Headlights",bucket:"Bucket Attachment",track:"Track",threePointHitch:"Three Point Hitch",quickCoupler:"Quick Coupler",powerTakeoff:"Power Takeoff",heater:"Heater and A/C",flameDecal:"Flame Decal",autoPilot:"Auto Pilot",gps:"GPS",stainlessExhaust:"Stainless Steel Exhaust"},SupplierLocations=["Goodfield, IL","Fargo, ND","Grand Island, NB","Wichita, KS","Benson, MN","Calhoun, GA","New Holland, PA","Racine, WI","Burlington, IL"],TradeRouteLocations=["africa","asia","europe","middleEast","southPacific","southAmerica"],TradeRouteNames={africa:"African",asia:"Asian",europe:"European",middleEast:"Middle Eastern",southPacific:"South Pacific",southAmerica:"South American"},USSectors={NORTH_EAST:0,SOUTH_EAST:1,MID_WEST:2,NORTH_WEST:3,SOUTH_WEST:4},SectorGrids=["sectorGridNE","sectorGridSE","sectorGridMW","sectorGridNW","sectorGridSW"],IconAnimations={DOLLAR_SIGN:"dollarSign",PLUS_SIGN:"plusSign"},Animations={ignitionKey:{idle:{frameRate:10,looped:!1,keyFrames:[0]},turnOn:{frameRate:10,looped:!1,keyFrames:[0,0,0,1,1,1,2,2,2]}},dollarIcon:{idle:{frameRate:10,looped:!1,keyFrames:[5]},expand:{frameRate:15,loops:!1,keyFrames:[0,0,0,1,1,2,3,4,5]}},plusIcon:{idle:{frameRate:10,looped:!1,keyFrames:[5]},expand:{frameRate:15,loops:!1,keyFrames:[0,0,0,1,1,2,3,4,5]}}},gameData={buildings:{plant:{id:BuildingTypes.PLANT,img:"iconPlant",description:"Build your machines",cost:5e5},dealership:{id:BuildingTypes.DEALERSHIP,img:"iconDealership",description:"Sell your machines",cost:5e5}},machines:{tractor:{basic:{requiredParts:[{name:"tires",sprite:!0},{name:"engine",sprite:!0},{name:"transmission",sprite:!0}],optionalParts:["flameDecal","autoPilot","gps"],spriteTranslations:{tires:"tires",engine:"engine",transmission:"transmission"}},medium:{requiredParts:[{name:"tires",sprite:!0},{name:"engine",sprite:!0},{name:"transmission",sprite:!0},{name:"headlights",sprite:!1}],optionalParts:["flameDecal","autoPilot","gps"],spriteTranslations:{tires:"tires",engine:"engine",transmission:"transmission",headlights:"engine"}},heavy:{requiredParts:[{name:"tracks",sprite:!0},{name:"engine",sprite:!0},{name:"transmission",sprite:!0},{name:"headlights",sprite:!1},{name:"threePointHitch",sprite:!1}],optionalParts:["autoPilot","gps","heater"],spriteTranslations:{tracks:"tracks",engine:"engine",threePointHitch:"transmission",transmission:"transmission",headlights:"engine"}}},skidsteer:{basic:{requiredParts:[{name:"tires",sprite:!0},{name:"transmission",sprite:!0},{name:"engine",sprite:!1},{name:"bucket",sprite:!0}],optionalParts:["flameDecal","autoPilot","gps"],spriteTranslations:{tires:"tires",engine:"transmission",transmission:"transmission",bucket:"bucket"}},medium:{requiredParts:[{name:"tires",sprite:!0},{name:"transmission",sprite:!0},{name:"engine",sprite:!1},{name:"bucket",sprite:!0},{name:"quickCoupler",sprite:!1}],optionalParts:["flameDecal","autoPilot","gps"],spriteTranslations:{tires:"tires",engine:"transmission",transmission:"transmission",quickCoupler:"transmission",bucket:"bucket"}},heavy:{requiredParts:[{name:"tracks",sprite:!0},{name:"engine",sprite:!0},{name:"transmission",sprite:!0},{name:"bucket",sprite:!0},{name:"powerTakeoff",sprite:!1},{name:"quickCoupler",sprite:!1}],optionalParts:["autoPilot","gps","heater"],spriteTranslations:{tracks:"tracks",engine:"engine",transmission:"transmission",quickCoupler:"transmission",powerTakeoff:"bucket",bucket:"bucket"}}}},partNames:{tires:"Tires",tracks:"Tracks",engine:"Engine",transmission:"Transmission",bucket:"Bucket",headlights:"Headlights",quickCoupler:"Quick Coupler",threePointHitch:"Three Point Hitch",powerTakeoff:"Power Takeoff"},parts:{tires:{basic:[{description:"Standard",img:"tiresBasicStandard",cost:350,build:50,sell:1e3},{description:"Premium",img:"tiresBasicPremium",cost:1e3,build:250,sell:5e3},{description:"Deluxe",img:"tiresBasicDeluxe",cost:1350,build:250,sell:5e3}],medium:[{description:"Standard",img:"tiresMediumStandard",cost:700,build:200,sell:1400},{description:"Premium",img:"tiresMediumPremium",cost:1e3,build:200,sell:4e3},{description:"Deluxe",img:"tiresMediumDeluxe",cost:2e3,build:500,sell:1e4}]},tracks:{heavy:[{description:"Standard",img:"tracksHeavyStandard",cost:1e3,build:150,sell:3e3},{description:"Premium",img:"tracksHeavyPremium",cost:1500,build:250,sell:5e3},{description:"Deluxe",img:"tracksHeavyDeluxe",cost:4e3,build:1e3,sell:2e4}]},engine:{basic:[{description:"Standard",img:"engineBasicStandard",cost:2e3,build:500,sell:1e4},{description:"Premium",img:"engineBasicPremium",cost:3e3,build:750,sell:15e3},{description:"Deluxe",img:"engineBasicDeluxe",cost:5e3,build:500,sell:1e4}],medium:[{description:"Standard",img:"engineMediumStandard",cost:4e3,build:1e3,sell:2e4},{description:"Premium",img:"engineMediumPremium",cost:6e3,build:1500,sell:3e4},{description:"Deluxe",img:"engineMediumDeluxe",cost:1e4,build:1e3,sell:2e4}],heavy:[{description:"Standard",img:"engineHeavyStandard",cost:6e3,build:1500,sell:3e4},{description:"Premium",img:"engineHeavyPremium",cost:9e3,build:2e3,sell:4e4},{description:"Deluxe",img:"engineHeavyDeluxe",cost:15e3,build:1500,sell:3e4}]},transmission:{basic:[{description:"Standard",img:"transmissionBasicStandard",cost:300,build:50,sell:1e3},{description:"Premium",img:"transmissionBasicPremium",cost:400,build:75,sell:1500},{description:"Deluxe",img:"transmissionBasicDeluxe",cost:1e3,build:250,sell:500}],medium:[{description:"Standard",img:"transmissionMediumStandard",cost:600,build:100,sell:2e3},{description:"Premium",img:"transmissionMediumPremium",cost:800,build:150,sell:3e3},{description:"Deluxe",img:"transmissionMediumDeluxe",cost:2e3,build:500,sell:1e3}],heavy:[{description:"Standard",img:"transmissionHeavyStandard",cost:900,build:150,sell:3e3},{description:"Premium",img:"transmissionHeavyPremium",cost:1200,build:225,sell:4500},{description:"Deluxe",img:"transmissionHeavyDeluxe",cost:3e3,build:1e3,sell:2e3}]},bucket:{basic:[{description:"Standard",img:"bucketBasicStandard",cost:300,build:50,sell:1e3},{description:"Premium",img:"bucketMediumStandard",cost:400,build:75,sell:1500},{description:"Deluxe",img:"bucketHeavyStandard",cost:1e3,build:250,sell:500}],medium:[{description:"Standard",img:"bucketBasicPremium",cost:600,build:100,sell:2e3},{description:"Premium",img:"bucketMediumPremium",cost:800,build:150,sell:3e3},{description:"Deluxe",img:"bucketHeavyPremium",cost:2e3,build:500,sell:1e3}],heavy:[{description:"Standard",img:"bucketBasicDeluxe",cost:900,build:150,sell:3e3},{description:"Premium",img:"bucketMediumDeluxe",cost:1200,build:225,sell:4500},{description:"Deluxe",img:"bucketHeavyDeluxe",cost:3e3,build:1e3,sell:2e3}]},headlights:{medium:[{description:"Standard",img:"headlightsMediumStandard",cost:600,build:100,sell:2e3},{description:"Premium",img:"headlightsMediumPremium",cost:800,build:150,sell:3e3},{description:"Deluxe",img:"headlightsMediumDeluxe",cost:2e3,build:500,sell:1e3}],heavy:[{description:"Standard",img:"headlightsHeavyStandard",cost:900,build:150,sell:3e3},{description:"Premium",img:"headlightsHeavyPremium",cost:1200,build:225,sell:4500},{description:"Deluxe",img:"headlightsHeavyDeluxe",cost:3e3,build:1e3,sell:2e3}]},threePointHitch:{heavy:[{description:"Standard",img:"threePointHitchHeavyStandard",cost:900,build:150,sell:3e3},{description:"Premium",img:"threePointHitchHeavyPremium",cost:1200,build:225,sell:4500},{description:"Deluxe",img:"threePointHitchHeavyDeluxe",cost:3e3,build:1e3,sell:2e3}]},quickCoupler:{medium:[{description:"Standard",img:"quickCouplerMediumStandard",cost:500,build:150,sell:1500},{description:"Premium",img:"quickCouplerMediumPremium",cost:750,build:150,sell:1500},{description:"Deluxe",img:"quickCouplerMediumDeluxe",cost:1e3,build:150,sell:1500}],heavy:[{description:"Standard",img:"quickCouplerHeavyStandard",cost:900,build:150,sell:3e3},{description:"Premium",img:"quickCouplerHeavyPremium",cost:1200,build:225,sell:4500},{description:"Deluxe",img:"quickCouplerHeavyDeluxe",cost:3e3,build:1e3,sell:2e3}]},powerTakeoff:{heavy:[{description:"Standard",img:"powerTakeoffHeavyStandard",cost:900,build:150,sell:3e3},{description:"Premium",img:"powerTakeoffHeavyPremium",cost:1200,build:225,sell:4500},{description:"Deluxe",img:"powerTakeoffHeavyDeluxe",cost:3e3,build:1e3,sell:2e3}]}},optionalParts:{heater:[{id:"c1",frame:1,description:"standard heater",img:"heaterStandard",cost:900,build:150,sell:3e3},{id:"c2",frame:2,description:"premium heater",img:"heaterPremium",cost:1200,build:225,sell:4500},{id:"c3",frame:3,description:"deluxe heater",img:"heaterDeluxe",cost:3e3,build:1e3,sell:2e3}],flameDecal:[{id:"c1",frame:1,description:"flame decal",img:"flameDecal",cost:30,build:50,sell:1e3}],gps:[{id:"c1",frame:1,description:"GPS",img:"gps",cost:50,build:50,sell:1e3}],stainlessExhaust:[{id:"c1",frame:1,description:"stainless exhaust",img:"stainlessExhause",cost:100,build:50,sell:1e3}],autoPilot:[{id:"c1",frame:1,description:"auto pilot",img:"autoPilot",cost:300,build:50,sell:1e3}]},levels:[{startingBank:999999,brief:{background:"briefBg01",text:["Build 1 Plant","Create 1 Machine Model","Manufacture 5 Machines"]},goals:[{type:"newPlants",value:1,calculation:"number"},{type:"newMachineModels",value:1,calculation:"length"},{type:"newMachines",value:5,calculation:"length"}]},{startingBank:1e5,brief:{background:"briefBg03",text:["Make $100,000 in profits","Sell 10 machines","Manufacture 25 machines"]},goals:[{type:"profit",value:1e5,calculation:"money"},{type:"machinesSold",value:10,calculation:"length"},{type:"newMachines",value:5,calculation:"length"}]},{startingBank:1e5,brief:{background:"briefBg03",text:["Make $250,000 in profits","Sell 30 machines","Establish 1 Parts Supplier"]},goals:[{type:"profit",value:25e4,calculation:"money"},{type:"machinesSold",value:10,calculation:"length"},{type:"newSuppliers",value:1,calculation:"length"}]},{startingBank:1e5,brief:{background:"briefBg04",text:["Establish 3 Dealerships","Create 5 Machine Models","Produce 100 Machines"]},goals:[{type:"profit",value:1e6,calculation:"money"},{type:"newDealerships",value:3,calculation:"number"},{type:"newMachineModels",value:2,calculation:"length"},{type:"newMachines",value:50,calculation:"length"}]},{startingBank:1e5,brief:{background:"briefBg04",text:["Create 1 Trade Route"]},goals:[{type:"newTradeRoutes",value:2,calculation:"number"}]},{startingBank:1e5,brief:{background:"briefBg04",text:["Make $1,000,000 in profits","Build 5 Plants","Establish 5 Parts Suppliers","Produce 100 Machines"]},goals:[{type:"profit",value:1e6,calculation:"money"},{type:"newPlants",value:5,calculation:"number"},{type:"newSuppliers",value:5,calculation:"length"},{type:"newMachines",value:100,calculation:"length"}]},{startingBank:1e5,brief:{background:"briefBg04",text:["Build 2 Plants","Create 10 Machine Models","Produce 500 Machines"]},goals:[{type:"profit",value:1e7,calculation:"money"},{type:"newPlants",value:2,calculation:"number"},{type:"newMachineModels",value:10,calculation:"length"},{type:"newMachines",value:500,calculation:"length"}]},{startingBank:1e5,brief:{background:"briefBg04",text:["Establish 5 Trade Routes","Make $10,000,000 in profits"]},goals:[{type:"profit",value:1e7,calculation:"money"},{type:"newTradeRoutes",value:5,calculation:"number"}]},{startingBank:1e5,brief:{background:"briefBg04",text:["Build 10 Plants","Create 20 Machine Models","Produce 100 Machines"]},goals:[{type:"profit",value:1e6,calculation:"money"},{type:"newPlants",value:10,calculation:"number"},{type:"newMachineModels",value:20,calculation:"length"},{type:"newMachines",value:100,calculation:"length"}]},{startingBank:1e5,brief:{background:"briefBg04",text:["Establish 10 Trade Routes","Make $50,000,000 in profits"]},goals:[{type:"profit",value:5e7,calculation:"money"},{type:"newTradeRoutes",value:10,calculation:"number"}]}],bonuses:{buildings:{plant:500,dealership:1e3,tradeRoute:1e4},suppliers:{added:5e3,partsPurchased:1e3,allPartsUsed:1e4},manufacturing:{machine10:10,machine50:50,machine100:100,machine500:500,machine1000:1e3,machine5000:5e3,machine10000:1e4,machine50000:5e4}}},playerData={firstPlay:{init:!0,world:!0,usDetail:!0,plant:!0,plantDetails:!0,equipmentList:!0,equipmentCreate:!0,equipmentEdit:!0,dealership:!0,supplier:!0,tradeRoute:!0,outOfWholesaleParts:!0},level:0,allCompleted:!1,bank:0,profit:0,bonusPoints:0,bonusesAchieved:{machine50:!1,machine100:!1,machine500:!1,machine1000:!1,machine5000:!1,machine10000:!1,machine50000:!1},sectors:[{},{},{},{},{}],buildingCount:{plant:0,dealership:0,tradeRoute:0,total:0},modelCount:{tractor:0,skidsteer:0,total:0},machinesBuilt:{tractor:0,skidsteer:0,total:0},suppliers:{}},Machine=function(){function a(a){this.config=PWG.Utils.extend(PWG.Utils.clone(b),a);var c=gameData.machines[a.type][a.size].requiredParts;this.requiredParts={},this.requiredPartsTotal=c.length,this.requiredPartsCount=0,this.isComplete=!1,PWG.Utils.each(c,function(b){a.parts&&a.parts[b.name]?(this.requiredParts[b.name]=!0,this.requiredPartsCount++):this.requiredParts[b.name]=!1},this),this.requiredPartsCount>=this.requiredPartsTotal&&(this.isComplete=!0)}var b={id:"",name:"",type:"",size:"",cost:0,plantId:"",dealershipId:"",tradeRouteId:"",active:!0,parts:{},wholesaleParts:{},optionalParts:{}};return a.prototype.set=function(a,b){this.config[a]=b},a.prototype.get=function(a){return this.config.hasOwnProperty(a)?this.config[a]:void 0},a.prototype.isComplete=function(){var a=!1;return this.requiredPartsCount>=this.requiredPartsTotal&&(a=!0),a},a.prototype.setPart=function(a,b,c){trace("Machine/setPart, part = "+a+", val = ",b,", wholesale = "+c),c?this.config.wholesaleParts[a]=b:this.config.parts[a]=b,this.isComplete||(this.requiredParts.hasOwnProperty(a)&&!this.requiredParts[a]&&(this.requiredParts[a]=!0,this.requiredPartsCount++,PWG.EventCenter.trigger({type:Events.REQUIRED_PART_ADDED}),trace("	requiredPartsCount now: "+this.requiredPartsCount+"/"+this.requiredPartsTotal)),this.requiredPartsCount>=this.requiredPartsTotal&&(this.isComplete=!0,PWG.EventCenter.trigger({type:Events.MACHINE_PARTS_COMPLETE,value:this.config})))},a.prototype.save=function(){this.calculateCostAndPoints()},a.prototype.calculateCostAndPoints=function(){trace("Machine["+this.config.id+"]/calculateCost, this = ",this),PWG.Utils.each(this.config.parts,function(a,b){trace("	val = "+a+", key = "+b),this.config.cost+=gameData.parts[b][this.config.size][a].cost},this),PWG.Utils.each(this.config.optionalParts,function(a){this.config.cost+=gameData.parts[a][this.config.size][val].cost},this)},a.prototype.reset=function(a){this.config.parts[a]=-1},a}(),ASPECT_RATIO=[9,16],GAME_NAME="global_trader_3_0",FACEBOOK_URL="https://www.facebook.com/cnhitrade",TIME_PER_TURN=52,TURN_TIME_INTERVAL=3e3,US_DETAIL_GRID_CELLS=6,MACHINE_LIST_COLUMNS=2,MACHINE_LIST_ICONS=6,MIN_WHOLESALE_LEVEL=2,MIN_TRADE_ROUTE_LEVEL=5,NUM_PART_QUALITIES=3,gameLogic={global:{listeners:[{event:Events.CHANGE_SCREEN,handler:function(a){PWG.ViewManager.switchGroup(a.value),PWG.ScreenManager.changeScreen(a.value),PhaserGame.config.turnScreens.indexOf(a.value)>-1?PhaserGame.turnActive||PhaserGame.startTurn():PhaserGame.turnActive&&PhaserGame.stopTurn()}},{event:Events.OPEN_NOTIFICATION,handler:function(a){var b=this.views.notification,c=b.children["notification-text"].view;c.text!==a.value&&c.setText(a.value),b.show()}},{event:Events.CLOSE_NOTIFICATION,handler:function(){this.views.notification.hide()}},{event:Events.GAME_TIME_UPDATED,handler:function(a){PhaserGame.turnTime=a.value;var b=a.value>=10?a.value:"0"+a.value;PWG.ViewManager.callMethod("global:turnGroup:timerText","setText",[b],this)}},{event:Events.UPDATE_BANK,handler:function(a){TurnManager.updateBank(a.value)}},{event:Events.BANK_UPDATED,handler:function(){var a=PWG.Utils.formatMoney(TurnManager.get("bank"),0);PWG.ViewManager.callMethod("global:turnGroup:bankText","setText",[a],this)}},{event:Events.BONUSES_UPDATED,handler:function(){PWG.ViewManager.callMethod("global:turnGroup:bonusText","setText",[TurnManager.get("bonusPoints")],this)}},{event:Events.TURN_COMPLETED,handler:function(){PhaserGame.stopTurn(),PWG.ViewManager.callMethod("global:turnGroup:timerText","setText",[""],this),PhaserGame.playerData.level<gameData.levels.length-1?PhaserGame.buildYearEndReport():(PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"home"}),alert("you won!"))}},{event:Events.BUILDING_STATE_UPDATED,handler:function(a){var b=a.building.config;TurnManager.playerData.firstPlay[TutorialTypes.PLANT]&&(PhaserGame.activeTutorial=TutorialTypes.PLANT,PhaserGame.addTutorialGuy()),GridManager.updateBuildingState(b.sector,b.cell,b.type,b.state)}},{event:Events.ADD_DEALERSHIP_NOTIFICATION,handler:function(a){PhaserGame.addDealershipOpportunityNotification(a)}},{event:Events.ADD_SUPPLIER_NOTIFICATION,handler:function(a){PhaserGame.addSupplierOpportunityNotification(a)}},{event:Events.ADD_TRADE_ROUTE_NOTIFICATION,handler:function(a){PhaserGame.addTradeRouteOpportunityNotification(a)}},{event:Events.MACHINE_SOLD,handler:function(a){PhaserGame.machineSold(a.building)}}],methods:{init:function(){PhaserGame.getSavedData(),TurnManager.init()},preload:function(){PWG.PhaserLoader.load(PhaserGame.config.assets)},create:function(){PWG.ViewManager.hideView("global:notificationEnvelope"),PWG.ViewManager.hideView("global:tradeRouteAlertIcon"),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:PhaserGame.config.defaultScreen})},render:function(){PWG.ScreenManager.render()},getSavedData:function(){var a=PWG.Storage.get(GAME_NAME);a||(a=playerData),PhaserGame.playerData=a},setSavedData:function(){var a={};a[GAME_NAME]=PhaserGame.playerData,PWG.Storage.set(a)},ignitionAnimationCompleted:function(){var a=PWG.ViewManager.getControllerFromPath("home:ignitionKey");a.view.events.onAnimationComplete.remove(PhaserGame.ignitionAnimationCompleted,this),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"brief"})},addTutorialGuy:function(){if(trace("PhaserGame/addTutorialGuy, tutorialOpen = "+PhaserGame.tutorialOpen+", activeTutorial = "+PhaserGame.activeTutorial),!PhaserGame.tutorialOpen){PhaserGame.tutorialOpen=!0;var a=PWG.ViewManager.getControllerFromPath("global:notifications"),b=PWG.Utils.clone(PhaserGame.config.dynamicViews.tutorialGuy),c=PhaserGame.config.notificationText;trace("	text = "+c.tutorial[PhaserGame.activeTutorial].content),b.views.content.text=c.tutorial[PhaserGame.activeTutorial].content,PWG.ViewManager.addView(b,a,!0)}},removeTutorialGuy:function(){trace("remove tutorial guy"),PWG.ViewManager.removeView("tutorialGuy","global:notifications"),TurnManager.playerData.firstPlay[PhaserGame.activeTutorial]=!1,PhaserGame.tutorialOpen=!1,PhaserGame.activeTutorial=!1},showNotification:function(){var a=PhaserGame.activeSector;if(PhaserGame.notifications[a].length>0){var b=PWG.ViewManager.getControllerFromPath("global:notifications"),c=PhaserGame.notifications[a].pop();c.confirmAction&&(PhaserGame.confirmAction=c.confirmAction,PWG.ViewManager.showView("global:confirmButton")),PhaserGame.cancelAction=c.cancelAction?c.cancelAction:PhaserGame.removeNotification,PWG.ViewManager.hideView("global:backButton"),PWG.ViewManager.showView("global:cancelButton"),PWG.ViewManager.addView(c,b,!0),0===PhaserGame.notifications[a].length&&PhaserGame.hideNotificationEnvelope()}},removeNotification:function(){PWG.ViewManager.showView("global:backButton"),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.removeView("notification","global:notifications"),PhaserGame.cancelAction=null},showNotificationEnvelope:function(){PWG.ViewManager.showView("global:notificationEnvelope")},hideNotificationEnvelope:function(){PWG.ViewManager.hideView("global:notificationEnvelope")},showTradeRouteAlert:function(){PWG.ViewManager.showView("global:tradeRouteAlertIcon")},hideTradeRouteAlert:function(){PWG.ViewManager.hideView("global:tradeRouteAlertIcon")},addManualPage:function(a){var b=PWG.ViewManager.getControllerFromPath("manual:manualPages"),c=PWG.Utils.clone(PhaserGame.config.dynamicViews.manualPage),d=PWG.Utils.clone(PhaserGame.config.dynamicViews.manualPageNumber),e=PhaserGame.config.dynamicViews.manualPageText,f=PhaserGame.config.dynamicViews.manualPageImage,g=PhaserGame.config.tutorial.pages[a];trace("making manual page: "+a+", with: ",g,"	pages = ",b),c.name+=a,c.views.title.text=PhaserGame.config.tutorial.title,d.text=a+1+"/"+PhaserGame.config.tutorial.pages.length,c.views[d.name]=d;PWG.Utils.clone(e);PWG.Utils.each(g.blurbs,function(a,b){var d=PWG.Utils.clone(e);d.name+=b,d.text=a.text,d.x=a.x,d.y=a.y,c.views[d.name]=d},this),PWG.Utils.each(g.images,function(a,b){var d=PWG.Utils.clone(f);d.name+=b,d.img=a.img,d.x+=a.x,d.y+=a.y,d.attrs.width=a.width,d.attrs.height=a.height,c.views[d.name]=d},this),PWG.ViewManager.addView(c,b,!0)},nextManualPage:function(){trace("PhaserGame/nextManualPage, idx = "+PhaserGame.manualPage),PhaserGame.manualPage<PhaserGame.config.tutorial.pages.length-1?PhaserGame.manualPage++:PhaserGame.manualPage=0,PhaserGame.addManualPage(PhaserGame.manualPage)},startTurn:function(){TurnManager.startTurn(),BuildingManager.init(),WholesaleManager.init(),PhaserGame.notifications=[[],[],[],[],[]],PhaserGame.supplierNotifications=[],PhaserGame.tradeRouteNotifications={},PhaserGame.availableTradeRoutes={},PhaserGame.zoomedIn=!1,GridManager.init(USSectors,US_DETAIL_GRID_CELLS,US_DETAIL_GRID_CELLS,PWG.Stage.gameW/6),PhaserGame.turnActive=!0,PhaserGame.timePerTurn=TIME_PER_TURN,PhaserGame.turnTimer=new PWG.PhaserTime.Controller("turnTime"),PhaserGame.turnTimer.loop(TURN_TIME_INTERVAL,function(){PhaserGame.incrementTurnTime()},this),PhaserGame.turnTimer.start();var a=PWG.Utils.formatMoney(TurnManager.get("bank"),0);PWG.ViewManager.callMethod("global:turnGroup:bankText","setText",[a],this),PWG.ViewManager.callMethod("global:turnGroup:bonusText","setText",[TurnManager.get("bonusPoints")],this),PWG.ViewManager.setFrame("global:turnGroup:turnIndicator",TurnManager.playerData.level)},incrementTurnTime:function(){PhaserGame.timePerTurn--,PhaserGame.timePerTurn<=0?PWG.EventCenter.trigger({type:Events.TURN_COMPLETED}):(BuildingManager.update(),TurnManager.playerData.level>=MIN_WHOLESALE_LEVEL&&WholesaleManager.update(),PWG.EventCenter.trigger({type:Events.GAME_TIME_UPDATED,value:PhaserGame.timePerTurn}))},showEndTurnPrompt:function(){var a=PhaserGame.config.dynamicViews.endTurnPrompt,b=PWG.ViewManager.getControllerFromPath("world");PWG.ViewManager.addView(a,b,!0),PhaserGame.confirmAction={method:function(){PWG.EventCenter.trigger({type:Events.TURN_COMPLETED}),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"brief"}),PWG.ViewManager.removeView("endTurnPrompt","world")},params:null},PhaserGame.cancelAction={method:function(){PWG.ViewManager.showView("global:backButton"),PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.removeView("endTurnPrompt","world")},params:null},PWG.ViewManager.hideView("global:backButton"),PWG.ViewManager.showView("global:confirmButton"),PWG.ViewManager.showView("global:cancelButton")},stopTurn:function(){PWG.PhaserTime.removeTimer("turnTime"),PWG.EventCenter.trigger({type:Events.CLOSE_PARTS_MENU}),PWG.EventCenter.trigger({type:Events.CLOSE_WHOLESALE_PARTS_MENU}),PWG.EventCenter.trigger({type:Events.CLOSE_OPTIONAL_PARTS_MENU}),PhaserGame.removeNotification(),PhaserGame.hideNotificationEnvelope(),PhaserGame.hideTradeRouteAlert(),PhaserGame.notifications=null,PhaserGame.supplierNotifications=null,PhaserGame.availableTradeRoutes=null,PhaserGame.cancelAction=null,PhaserGame.confirmAction=null,AnimationManager.reset(),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.hideView("global:confirmButton"),PhaserGame.turnActive=!1},formatBuildingPin:function(a,b,c){var d=PWG.Utils.clone(PhaserGame.config.dynamicViews.buildingPin),e=PhaserGame.config.pinPositions.usSectors[b],f=PhaserGame.config.pinOffsets,g=PhaserGame.config.pinFills[a];return d.name="sector"+b+a,d.views.pin.img=PhaserGame.config.pinImages[a],d.views.pin.x+=e.x+f[a].x,d.views.pin.y+=e.y+f[a].y,d.views.locationCount.x+=e.x+f[a].x,d.views.locationCount.y+=e.y+f[a].y,d.views.locationCount.text="x"+c,d.views.locationCount.style.fill=g[b],d},initWorldZoom:function(a,b){PhaserGame.worldZoom={max:{width:a.width,height:a.height,x:a.position.x,y:a.position.y},min:{width:PWG.Stage.gameW,height:PWG.Stage.gameH,x:0,y:0},zoomIncrements:{width:.25*(a.width-PWG.Stage.gameW),height:.25*(a.height-PWG.Stage.gameH)},positionIncrements:{x:.25*-a.x,y:.25*-a.y}},PhaserGame.pinZoom={scaleIncrements:{x:[],y:[]},zoomIncrements:{width:.25*(b.width-PWG.Stage.gameW),height:.25*(b.height-PWG.Stage.gameH)},positionIncrements:{x:.25*-b.x,y:.25*-b.y}},PhaserGame.worldZoomInitialized=!0},worldZoomOutFull:function(){if("world"===PWG.ScreenManager.currentId){PhaserGame.removeTradeRouteViews();var a=PhaserGame.worldZoom.max;PhaserGame.worldView.width=a.width,PhaserGame.worldView.height=a.height,PhaserGame.worldView.x=a.x,PhaserGame.worldView.y=a.y,PWG.EventCenter.trigger({type:Events.WORLD_ZOOMED_OUT}),PhaserGame.zoomedIn=!1,PhaserGame.zoomedInTriggered=!1}},worldZoomOut:function(){if("world"===PWG.ScreenManager.currentId&&PhaserGame.zoomedIn){PhaserGame.removeTradeRouteViews();var a=PhaserGame.worldZoom.max,b=PhaserGame.phaser.add.tween(PhaserGame.worldView);b.onComplete.add(function(){PWG.ViewManager.showView("world:usMap"),PWG.ViewManager.showView("world:buildingPins"),PWG.EventCenter.trigger({type:Events.WORLD_ZOOMED_OUT})}),b.to({x:a.x,y:a.y,width:a.width,height:a.height},500,Phaser.Easing.Sinusoidal.InOut,!0,500*Math.random()),b.start(),PhaserGame.zoomedIn=!1,PhaserGame.zoomedInTriggered=!1}},worldZoomIn:function(){if("world"===PWG.ScreenManager.currentId&&!PhaserGame.zoomedIn){PhaserGame.zoomedIn=!0,PWG.ViewManager.hideView("world:usMap"),PWG.ViewManager.hideView("world:buildingPins");var a=PhaserGame.worldZoom.min,b=PhaserGame.phaser.add.tween(PhaserGame.worldView);b.onComplete.add(function(){trace("zoom tween complete, zoom in triggered = "+PhaserGame.zoomedInTriggered),PhaserGame.zoomedInTriggered||(PhaserGame.zoomedInTriggered=!0,PWG.EventCenter.trigger({type:Events.WORLD_ZOOMED_IN}))}),b.to({x:a.x,y:a.y,width:a.width,height:a.height},500,Phaser.Easing.Sinusoidal.InOut,!0,500*Math.random()),b.start()}},addTradeRouteViews:function(){var a=PWG.ViewManager.getControllerFromPath("world"),b=PWG.Utils.clone(PhaserGame.config.dynamicViews.tradeRouteArrows),c=PhaserGame.config.dynamicViews.tradeRouteArrow,d=PhaserGame.config.tradeRouteArrowConfig,e=PWG.Utils.clone(PhaserGame.config.dynamicViews.tradeRoutePins),f=PhaserGame.config.dynamicViews.tradeRoutePin,g=PhaserGame.config.tradeRoutePinConfig,h=PWG.Utils.clone(PhaserGame.config.dynamicViews.tradeRouteAlertIcons),i=PhaserGame.config.dynamicViews.tradeRouteAvailableIcon,j=PhaserGame.config.tradeRouteAlertIconConfig,k=PhaserGame.availableTradeRoutes,l=BuildingManager.getExistingTradeRoutes();trace("EXISTING TRADE ROUTES = ",l);var m={africa:!1,asia:!1,europe:!1,middleEast:!1,northPacific:!1,southPacific:!1,southAmerica:!1};PWG.Utils.each(l,function(a,h){trace("tradeRoute["+h+"] = ",a);var i=TradeRouteLocations[a.worldLocation],j=PWG.Utils.clone(c);j.name+=h,m[i]||(PWG.Utils.each(d[i],function(a,b){j[b]=a},this),trace("	adding existing arrow: "+j.name),b.views[j.name]=j,m[i]=!0);var k=PWG.Utils.clone(f);k.name+=h,k.views.pin.x+=g[i].x,k.views.pin.y+=g[i].y,k.views.locationCount.text+=TurnManager.tempTradeRouteCount[i],k.views.locationCount.x+=g[i].x,k.views.locationCount.y+=g[i].y,e.views[k.name]=k},this),trace("available trade routes opportunities = ",k),PWG.Utils.each(k,function(a,e){trace("	tradeRoute["+e+"] = ",a);var f=TradeRouteLocations[a.config.worldLocation];if(!m[f]){trace("ADDING OPPORTUNITY ARROW FOR: "+f);var g=PWG.Utils.clone(c),k=d[f];g.name+=e,PWG.Utils.each(k,function(a,b){g[b]=a},this),b.views[g.name]=g}var l=PWG.Utils.clone(i);l.name=e,l.tradeRouteId=e,PWG.Utils.each(j[f],function(a,b){l[b]=a},this),h.views[l.name]=l},this),PWG.ViewManager.addView(b,a,!0),PWG.ViewManager.addView(e,a,!0),PWG.ViewManager.addView(h,a,!0)},removeTradeRouteViews:function(){trace("removeTradeRouteViews"),PWG.ViewManager.removeView("tradeRouteArrows","world"),PWG.ViewManager.removeView("tradeRoutePins","world"),PWG.ViewManager.removeView("tradeRouteAlertIcons","world")},removeTradeRouteArrows:function(){PWG.ViewManager.removeView("tradeRoutePins","world"),PWG.ViewManager.removeView("tradeRouteArrows","world")},tileClicked:function(a){if(PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.turnActive){var b=(PWG.ViewManager.getControllerFromPath("usDetail:usDetailGrid:"+a.name),a.attrs.frame);
switch(PhaserGame.activeTile=a,b){case TileCellFrames.EMPTY:PWG.EventCenter.trigger({type:Events.OPEN_BUILDINGS_MENU});break;case TileCellFrames.ACTIVE:a.attrs.frame=0,PWG.ViewManager.setFrame("usDetail:usDetailGrid:"+a.name,TileCellFrames.EMPTY),PhaserGame.activeTile=null;break;case TileCellFrames.PLANT_CONSTRUCTION:break;case TileCellFrames.PLANT_ACTIVE:PhaserGame.activeBuilding=BuildingManager.getBuilding(PhaserGame.activeSector,PhaserGame.activeTile.cell),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"buildingEdit"});break;case TileCellFrames.DEALERSHIP_CONSTRUCTION:break;case TileCellFrames.DEALERSHIP_ACTIVE:PhaserGame.activeBuilding=BuildingManager.getBuilding(PhaserGame.activeSector,PhaserGame.activeTile.cell),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"buildingEdit"})}}},addBuildingCreatePrompt:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy();var a=PWG.ViewManager.getControllerFromPath("global"),b=PWG.Utils.clone(PhaserGame.config.dynamicViews.buildingCreatePrompt),c=PhaserGame.config.notificationText;TurnManager.playerData.bank>gameData.buildings.plant.cost?(b.views.title.text=c.buildingCreate.content.toUpperCase(),PhaserGame.confirmAction={method:function(){PWG.EventCenter.trigger({type:Events.ADD_BUILDING})},params:{}},PWG.ViewManager.showView("global:confirmButton"),b.views.cost.text="$"+PWG.Utils.formatMoney(gameData.buildings.plant.cost,0)):(b.views.title.text=c.notEnoughMoney.content.toUpperCase(),PhaserGame.notEnoughMoneyPromptActive=!0),PhaserGame.cancelAction={method:function(){PWG.EventCenter.trigger({type:Events.CLOSE_BUILDINGS_MENU})},params:{}},PWG.ViewManager.showView("global:cancelButton"),PWG.ViewManager.hideView("global:backButton"),PWG.ViewManager.addView(b,a,!0),this.buildingCreatePromptOpen=!0},addBuilding:function(a){PWG.EventCenter.trigger({type:Events.CLOSE_BUILDINGS_MENU});var b=PhaserGame.activeTile,c=BuildingManager.createPlant({sector:PhaserGame.activeSector,cell:b.cell});if(c){var d;d=a===BuildingTypes.PLANT?TileCellFrames.PLANT_CONSTRUCTION:TileCellFrames.DEALERSHIP_ACTIVE,b.attrs.frame=d,PWG.ViewManager.setFrame("usDetail:usDetailGrid:"+b.name,d)}},addDealershipOpportunityNotification:function(a){var b=PWG.Utils.clone(PhaserGame.config.dynamicViews.notification),c=PWG.Utils.clone(PhaserGame.config.dynamicViews.dealershipPrompt),d=PhaserGame.config.notificationText.dealership,e=a.plant.equipment[a.dealership.config.modelId].name,f=PWG.Utils.formatMoney(a.dealership.config.resell,0),g=PWG.Utils.parseMarkup(d.content,{plant:a.plant.name,quantity:a.dealership.config.maxPerYear,model:e,resell:f});b.views.person.img=PhaserGame.config.notificationPeopleImages.dealership,b.views.content.text=g.toUpperCase(),b.views[c.name]=c,b.confirmAction={method:PhaserGame.addDealership,params:a.dealership},b.cancelAction={method:PhaserGame.resetDealership,params:a.dealership},PhaserGame.notifications[a.plant.sector].push(b),"usDetail"===PWG.ScreenManager.currentId&&PhaserGame.activeSector===a.plant.sector&&PhaserGame.showNotificationEnvelope()},addDealership:function(a){var b=a.config;PhaserGame.removeNotification(),b.cell=GridManager.getRandomEmptyCellIndex(b.sector),GridManager.addBuilding(b,b.sector),BuildingManager.addDealership(a);var c="usDetail:usDetailGrid:usDetailGridItem"+b.cell,d=PWG.ViewManager.getControllerFromPath(c),e=b.type.toUpperCase()+"_"+b.state.toUpperCase(),f=TileCellFrames[e];PWG.ViewManager.setFrame(c,f),d.config.attrs.frame=f},resetDealership:function(a){PhaserGame.removeNotification();var b=BuildingManager.findBuilding(a.config.plantId);b.dealershipNotifications[a.config.modelId]=!1},addSupplierOpportunityNotification:function(a){trace("addSupplierOpportunityNotification, event = ",a);var b=a.supplier,c=PWG.Utils.clone(PhaserGame.config.dynamicViews.notification),d=PWG.Utils.clone(PhaserGame.config.dynamicViews.supplierNotification),e=PhaserGame.config.notificationText.supplierNotification;trace("addSupplierOppurtunity, supplier = ",a.supplier);var f,g=b.config.partType;f=g===PartTypes.HEADLIGHTS||g===PartTypes.TIRES||g===PartTypes.TRACKS?PartDescriptions[g]:g===PartTypes.THREE_POINT_HITCH?PartDescriptions[g]+"es":PartDescriptions[g]+"s";var h=PWG.Utils.parseMarkup(e.content,{quantity:b.config.quantity,quality:b.config.part.description.toUpperCase(),type:f,size:b.config.partSize[0].toUpperCase(),cost:"$"+PWG.Utils.formatMoney(b.config.cost,0)});c.views.person.img=PhaserGame.config.notificationPeopleImages.supplier,c.views.content.text=h.toUpperCase(),PhaserGame.activeSupplier=b,c.views[d.name]=d,PhaserGame.supplierNotifications.push(c),PhaserGame.addSupplierPrompt()},addSupplierPrompt:function(){var a=PWG.Utils.clone(PhaserGame.config.dynamicViews.supplierPrompt),b=PhaserGame.config.notificationText;a.views.title.text=b.supplierPrompt.content.toUpperCase();var c=PWG.ViewManager.getControllerFromPath("global");PWG.ViewManager.addView(a,c,!0)},removeSupplierPrompt:function(){PWG.ViewManager.removeView("supplierPrompt","global")},showSupplierNotification:function(){var a=PWG.ViewManager.getControllerFromPath("global:notifications"),b=PhaserGame.supplierNotifications.pop();PWG.ViewManager.addView(b,a,!0),PWG.ViewManager.hideView("global:backButton"),PWG.ViewManager.showView("global:cancelButton"),PWG.ViewManager.showView("global:confirmButton"),"buildingEdit"===PWG.ScreenManager.currentId&&PWG.ViewManager.hideView("global:plantDetailGroup:equipmentButton"),PhaserGame.confirmAction={method:function(){PhaserGame.addSupplier(PhaserGame.activeSupplier)},params:{}},PhaserGame.cancelAction={method:function(){PhaserGame.resetSupplier(PhaserGame.activeSupplier)},params:{}},PhaserGame.supplierPromptClicked=!1},hideSupplierNotification:function(){PhaserGame.activeSupplier=null,PWG.ViewManager.showView("global:backButton"),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.removeView("notification","global:notifications"),"buildingEdit"===PWG.ScreenManager.currentId&&PWG.ViewManager.showView("global:plantDetailGroup:equipmentButton"),PhaserGame.cancelAction=null,PhaserGame.confirmAction=null},addSupplier:function(a){trace("addSupplier, supplier = ",a),PhaserGame.hideSupplierNotification(),PhaserGame.removeSupplierPrompt(),WholesaleManager.addSupplier(a)},resetSupplier:function(){PhaserGame.hideSupplierNotification(),PhaserGame.removeSupplierPrompt()},showTradeRouteNotification:function(a){if(PhaserGame.tradeRouteNotifications.hasOwnProperty(a)){var b=PWG.ViewManager.getControllerFromPath("global:notifications"),c=PhaserGame.tradeRouteNotifications[a];delete PhaserGame.tradeRouteNotifications[a],c.confirmAction&&(PhaserGame.confirmAction=c.confirmAction,PWG.ViewManager.showView("global:confirmButton")),PhaserGame.cancelAction=c.cancelAction?c.cancelAction:PhaserGame.removeTradeRouteNotification,PhaserGame.activeTradeRouteNotification=a,PWG.ViewManager.hideView("global:backButton"),PWG.ViewManager.showView("global:cancelButton"),PWG.ViewManager.addView(c,b,!0)}},removeTradeRouteNotification:function(a){trace("removeTradeRouteNotification, id = "+PhaserGame.activeTradeRouteNotification),PWG.ViewManager.removeView(a.config.id,"world:tradeRouteAlertIcons"),PWG.ViewManager.removeView(PhaserGame.activeTradeRouteNotification,"global:notifications"),delete PhaserGame.availableTradeRoutes[PhaserGame.activeTradeRouteNotification],PhaserGame.activeTradeRouteNotification="",PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.showView("global:backButton"),PhaserGame.removeTradeRouteViews(),PhaserGame.addTradeRouteViews()},showAvailableTradeRouteArrowsAndIcons:function(){PhaserGame.hideTradeRouteAlert(),"world"!==PWG.ScreenManager.currentId?(PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"world"}),PhaserGame.worldZoomIn()):PhaserGame.zoomedIn?(PhaserGame.removeTradeRouteViews(),PhaserGame.addTradeRouteViews()):PhaserGame.worldZoomIn()},addTradeRouteOpportunityNotification:function(a){var b=PWG.Utils.clone(PhaserGame.config.dynamicViews.notification),c=PWG.Utils.clone(PhaserGame.config.dynamicViews.tradeRoutePrompt),d=PhaserGame.config.notificationText.tradeRoute,e=a.plant.equipment[a.tradeRoute.config.modelId].name,f=PWG.Utils.formatMoney(a.tradeRoute.config.resell,0),g=PWG.Utils.parseMarkup(d.content,{plant:a.plant.name,quantity:a.tradeRoute.quantityPerYear,model:e,resell:f});b.name=a.tradeRoute.config.id,b.views.person.img=PhaserGame.config.notificationPeopleImages.tradeRoutes[TradeRouteLocations[a.tradeRoute.config.worldLocation]],b.views.content.text=g.toUpperCase(),c.views.title.text=a.tradeRoute.config.name,b.views[c.name]=c,b.confirmAction={method:PhaserGame.addTradeRoute,params:a.tradeRoute},b.cancelAction={method:PhaserGame.resetTradeRoute,params:a.tradeRoute},PhaserGame.availableTradeRoutes[a.tradeRoute.config.id]=a.tradeRoute,PhaserGame.tradeRouteNotifications[b.name]=b,PhaserGame.showTradeRouteAlert()},addTradeRoute:function(a){a.config;BuildingManager.addTradeRoute(a),PhaserGame.removeTradeRouteNotification(a)},resetTradeRoute:function(a){PhaserGame.removeTradeRouteNotification(a);var b=BuildingManager.findBuilding(a.config.plantId);b.tradeRouteNotifications[a.config.modelId]=!1},inventoryAdded:function(a,b){a.sector===PhaserGame.activeSector&&PhaserGame.addUsDetailIconAnimation(IconAnimations.PLUS_SIGN,a,b)},machineSold:function(a){a.type===BuildingTypes.DEALERSHIP?"usDetail"===PWG.ScreenManager.currentId&&a.sector===PhaserGame.activeSector&&PhaserGame.addUsDetailIconAnimation(IconAnimations.DOLLAR_SIGN,a,"usDetail:usDetailGrid"):a.type===BuildingTypes.TRADE_ROUTE&&"world"===PWG.ScreenManager.currentId&&PhaserGame.zoomedIn&&PhaserGame.addWorldIconAnimation(IconAnimations.DOLLAR_SIGN,a,"world:tradeRoutePins:tradeRoutePin_")},addUsDetailIconAnimation:function(a,b,c){var d=PWG.ViewManager.getControllerFromPath(c+":usDetailGridItem"+b.cell).view.position,e=a+"_"+b.sector+"_"+b.cell,f=a+AnimationManager.getNextIndex(e),g={type:a,key:e,name:f,x:d.x,y:d.y,animationName:"expand",parentPath:c};AnimationManager.add(g)},addWorldIconAnimation:function(a,b,c){trace("PhaserGame/addWorldIconAnimation, building = ",b);var d=c+b.id;trace("	path = "+d);var e=PWG.ViewManager.getControllerFromPath(d);trace("	parent = ",e);var f=e.children.pin.view.position;trace("	position = ",f);var g=a+"_"+b.worldLocation,h=a+AnimationManager.getNextIndex(g),i={type:a,key:g,name:h,x:f.x,y:f.y,animationName:"expand",parentPath:c};AnimationManager.add(i)},getCurrentMachinePiecePath:function(){return"equipmentEdit:machineEdit:machinePieceName:"+PhaserGame.machinePieces[PhaserGame.currentMachinePiece]},getMachinePieceIndex:function(a){var b=-1;return PWG.Utils.each(PhaserGame.machinePieces,function(c,d){c===a&&(b=d)},this),b},hideAllMachinePieceSprites:function(){var a=PWG.ViewManager.getControllerFromPath("equipmentEdit:machineEdit:machinePieceSprites");PWG.Utils.each(a.children,function(a){a.hide()},this)},hideMachinePieceSprite:function(a){var b="equipmentEdit:machineEdit:machinePieceSprites:"+a;PWG.ViewManager.hideView(b)},setSelectedMachinePieceSprite:function(){PhaserGame.resetAllMachinePieceSpriteFrames();var a=PhaserGame.spriteTranslations[PhaserGame.machinePieces[PhaserGame.currentMachinePiece]];PhaserGame.setMachinePieceSpriteFrame(a,1)},resetAllMachinePieceSpriteFrames:function(){var a=PWG.ViewManager.getControllerFromPath("equipmentEdit:machineEdit:machinePieceSprites");PWG.Utils.each(a.children,function(a){a.view.frame=0},this)},setMachinePieceSpriteFrame:function(a,b){var c="equipmentEdit:machineEdit:machinePieceSprites:"+a,d=PWG.ViewManager.getControllerFromPath(c);d.view.frame=b},populatePartsMenu:function(a){PhaserGame.activePartType=a;var b=PhaserGame.activeMachineSize,c=PWG.ViewManager.getControllerFromPath("equipmentEdit:machineEdit:partsMenu"),d=gameData.parts[a][b];trace("populatePartsMenu, type = "+a+"	parts data = ",d);var e=PWG.Utils.clone(PhaserGame.config.dynamicViews.partIcons),f=PhaserGame.config.dynamicViews.partIcon,g=f.offset,h=f.iconH,i=0,j=0;PWG.Utils.each(d,function(b,c){trace("	adding part["+c+"] info to views, part = ",b);var d=PWG.Utils.clone(f);d.name=a+c,d.views.icon.img=b.img,d.views.description.text=b.description.toUpperCase(),d.views.cost.text="$"+PWG.Utils.formatMoney(b.cost,0),d.views.invisButton.partIdx=c,d.views.invisButton.input=gameLogic.input.partIcon,j=h*i+g,PWG.Utils.each(d.views,function(a){a.y+=j},this),e.views.items.views[c]=d,i++},this),e.name="partIconsConfig",PWG.ViewManager.addView(e,c,!0),WholesaleManager.getTotalPartTypeCount(PhaserGame.activePartType,PhaserGame.activeMachineSize)>0&&PhaserGame.addWholesalePartPrompt()},addWholesalePartsMenu:function(){trace("PhaserGame/addWholesalePartsMenu"),PWG.ViewManager.removeView("partIconsConfig","equipmentEdit:machineEdit:partsMenu",!0);var a=PWG.ViewManager.getControllerFromPath("equipmentEdit:machineEdit:partsMenu"),b=PWG.Utils.clone(PhaserGame.config.dynamicViews.partIcons),c=PhaserGame.activePartType,d=PhaserGame.activeMachineSize,e=PhaserGame.config.dynamicViews.wholesalePartIcon,f=WholesaleManager.parts[c][d],g=(gameData.parts[c][d],e.offset),h=e.iconH,i=0,j=0,i=0;PWG.Utils.each(f,function(a,d){trace("supplier["+d+"] = ",a);var f=PWG.Utils.clone(e);f.name=d+"_"+c,f.views.icon.img=a.part.img,f.views.description.text=a.part.description.toUpperCase(),f.views.available.text=a.quantity+" available",f.views.invisButton.supplierId=d,f.views.invisButton.input=gameLogic.input.wholesalePartIcon,j=h*i+g,PWG.Utils.each(f.views,function(a){a.y+=j},this),b.views.items.views[d]=f,i++},this),b.name="wholesalePartsMenu",trace("	partsIconsConfig now = ",b),PhaserGame.cancelAction={method:function(){PhaserGame.removeWholesalePartsMenu()},params:{}},PWG.ViewManager.showView("global:cancelButton"),PWG.ViewManager.addView(b,a,!0),PhaserGame.showPartsMenu()},removeWholesalePartsMenu:function(){PWG.ViewManager.removeView("wholesalePartsMenu","equipmentEdit:machineEdit:partsMenu"),PhaserGame.cancelAction=null,PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.showView("global:backButton"),PWG.EventCenter.trigger({type:Events.CLOSE_PARTS_MENU})},populateOptionalPartsMenu:function(){var a=PWG.ViewManager.getControllerFromPath("equipmentEdit:machineEdit:partsMenu"),b=gameData.machines[PhaserGame.activeMachineType][PhaserGame.activeMachineSize].optionalParts,c=PWG.Utils.clone(PhaserGame.config.dynamicViews.partsMenu),d=PhaserGame.config.dynamicViews.partIcon,e=d.offset,f=d.iconH,g=(PhaserGame.activeMachineSize,0),h=0;PWG.Utils.each(b,function(a,b){var i=gameData.optionalParts[a],j=PWG.Utils.clone(d);j.name=i.id+b,j.views.icon.img=i.img,j.views.description.text=i.description.toUpperCase(),j.views.cost.text="$"+i.cost,j.views.invisButton.part=a,j.views.invisButton.input=gameLogic.input.optionalPartIcon,h=f*g+e,PWG.Utils.each(j.views,function(a){a.y+=h},this),c.views.items.views[b]=j,g++},this),c.views.title.text="OPTIONAL PARTS",c.views.closeButton.callback=gameLogic.buttonCallbacks.optionalPartsMenuClose,c.name="optionalPartsMenu",PWG.ViewManager.addView(c,a,!0)},addWholesalePartPrompt:function(){var a=PWG.ViewManager.getControllerFromPath("equipmentEdit"),b=PWG.Utils.clone(PhaserGame.config.dynamicViews.wholesalePartPrompt);b.views.title.text=PhaserGame.config.notificationText.wholesaleParts.content.toUpperCase(),PWG.ViewManager.addView(b,a,!0),PhaserGame.wholesalePromptAdded=!0},removeWholesalePartPrompt:function(){PWG.ViewManager.removeView("wholesalePartPrompt","equipmentEdit"),PhaserGame.cancelAction=null,PhaserGame.wholesaleCancelled&&(PWG.EventCenter.trigger({type:Events.OPEN_PARTS_MENU,value:PhaserGame.activePartType}),PhaserGame.wholesaleCancelled),PhaserGame.wholesalePromptAdded=!1},showPartsMenu:function(){PWG.ViewManager.showView("equipmentEdit:machineEdit:partsMenu")},hidePartsMenu:function(){PWG.ViewManager.hideView("equipmentEdit:machineEdit:partsMenu")},addMachineDiscardPrompt:function(){if(PhaserGame.cancelAction=null,PhaserGame.newMachine){var a=PWG.ViewManager.getControllerFromPath("equipmentEdit"),b=PWG.Utils.clone(PhaserGame.config.dynamicViews.discardMachinePrompt);PhaserGame.cancelAction={method:function(){PhaserGame.removeMachineDiscardPrompt()},params:{}},PhaserGame.confirmAction={method:function(){PhaserGame.removeMachineDiscardPrompt(),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentList"})},params:{}},PWG.ViewManager.showView("global:confirmButton"),PWG.ViewManager.addView(b,a,!0)}else PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentList"})},removeMachineDiscardPrompt:function(){PWG.ViewManager.removeView("discardMachinePrompt","equipmentEdit"),PhaserGame.confirmAction=null,PhaserGame.cancelAction=null,PhaserGame.activeMachine.isComplete||PWG.ViewManager.hideView("global:confirmButton")},addSupplierNotification:function(){var a=PWG.Utils.clone(PhaserGame.config.dynamicViews.supplierNotifcation),b=PWG.ViewManager.getControllerFromPath("global");trace("addSuplierNotification, supplierNotification = ",a,"	global = ",b),PWG.ViewManager.addView(a,b,!0),PhaserGame.confirmAction={method:function(){PhaserGame.removeSupplierNotification(),PhaserGame.addSupplier()},params:{}},PhaserGame.cancelAction={method:function(){PhaserGame.removeSupplierNotification()},params:{}},PhaserGame.confirmAction=null,PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.hideView("global:cancelButton")},removeSupplierNotification:function(){PWG.ViewManager.removeView("supplierNotification","global"),PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.hideView("global:cancelButton"),PhaserGame.cancelAction=null,PhaserGame.confirmAction=null},buildYearEndReport:function(){var a=gameData.levels[TurnManager.playerData.level].goals,b=TurnManager.currentData;PhaserGame.levelPassed=!0;var c,d=PWG.Utils.clone(PhaserGame.config.dynamicViews.yearSummary),e=PhaserGame.config.dynamicViews.summaryGoalText,f=PhaserGame.config.dynamicViews.summaryText,g=PhaserGame.config.goalsText;if(PWG.Utils.each(a,function(a,f){var h,i=!0;switch(a.calculation){case"money":h="$"+PWG.Utils.formatMoney(b[a.type],0)+" / $"+PWG.Utils.formatMoney(a.value,0),b[a.type]<a.value&&(PhaserGame.levelPassed=!1,i=!1);break;case"number":h=b[a.type]+" / "+a.value,b[a.type]<a.value&&(PhaserGame.levelPassed=!1,i=!1);break;case"length":h=b[a.type].length+" / "+a.value,b[a.type].length<a.value&&(PhaserGame.levelPassed=!1,i=!1)}c=PWG.Utils.clone(e);var j;j=i?PhaserGame.config.palette.black:PhaserGame.config.palette.darkRed,c.name+="summary-"+a.type,c.text=g.types[a.type]+h,c.y+=f*c.offsetY,c.style.fill=j,d.views["goal"+a.type]=c},this),c=PWG.Utils.clone(f),PhaserGame.levelPassed?(c.text=g.passed,c.style.fill=PhaserGame.config.palette.black):(c.text=g.failed,c.style.fill=PhaserGame.config.palette.darkRed),c.name+="levelPassed",c.y+=a.length*c.offsetY,d.views[c.name]=c,PhaserGame.yearSummary=d,PhaserGame.levelPassed)PhaserGame.playerData=TurnManager.playerData,PhaserGame.playerData.level<gameData.levels.length-1?(PhaserGame.playerData.level++,PhaserGame.setSavedData()):PhaserGame.gameCompleted();else{var h=TurnManager.playerData.sectors;PWG.Utils.each(h,function(a,b){PWG.Utils.each(a,function(a){BuildingManager.removeBuilding(b,a.id)},this)},this),TurnManager.playerData=PhaserGame.playerData}PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"turnEnd"})},addYearEndReport:function(){var a=PWG.ViewManager.getControllerFromPath("turnEnd");PWG.ViewManager.addView(PhaserGame.yearSummary,a,!0),PhaserGame.yearSummary={}},gameCompleted:function(){PhaserGame.activeTutorial=TutorialTypes.ALL_COMPLETED,PhaserGame.confirmAction={method:function(){PhaserGame.confirmAction=null,PhaserGame.playerData=playerData,PWG.Utils.each(PhaserGame.playerData.firstPlay,function(a,b){PhaserGame.playerData.firstPlay[b]=!1},this),PhaserGame.setSavedData(),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"home"})},params:{}},PhaserGame.addTutorialGuy()}}},input:{dismissTutorial:{inputDown:function(){trace("remove tutorial guy"),PhaserGame.removeTutorialGuy()}},manualBg:{inputDown:function(){this.manualOpen||(PhaserGame.manualPage=0,PhaserGame.addManualPage(0),this.manualOpen=!0)}},manualPage:{inputDown:function(){PhaserGame.nextManualPage()}},notificationEnvelope:{inputDown:function(){PhaserGame.showNotification()}},tradeRouteAlertIcon:{inputDown:function(){PhaserGame.showAvailableTradeRouteArrowsAndIcons()}},tradeRouteAvailableIcon:{inputDown:function(){PhaserGame.showTradeRouteNotification(this.controller.config.tradeRouteId)}},newPlant:{inputDown:function(){if(this.selected)PhaserGame.selectedIcon="",this.selected=!1;else{PhaserGame.selectedIcon=this.controller.id,this.selected=!0;var a=this.controller.view.input,b=this.controller.config.attrs;a.enableDrag(),a.enableSnap(b.width,b.height,!1,!0)}},onDragStop:function(){var a=this.controller.view;a.y<3.5*PWG.Stage.unit?a.y=3.5*PWG.Stage.unit:a.y>10.5*PWG.Stage.unit&&(a.y=9.4*PWG.Stage.unit);var b=PWG.Stage.gameW+a.width;a.x>b?a.x=b:a.x<0&&(a.x=0)}},editMachine:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.EDIT_MACHINE,value:this.controller.config.machineIdx})}},machinePieceForwardIcon:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.NEXT_MACHINE_PIECE_ICON})}},machinePieceBackwardIcon:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.PREV_MACHINE_PIECE_ICON})}},openPartsMenu:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.OPEN_PARTS_MENU,value:this.controller.config.partValue})}},openOptionalPartsMenu:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.OPEN_OPTIONAL_PARTS_MENU})}},partIcon:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.ADD_PART,value:this.controller.config.partIdx})}},wholesalePartIcon:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.ADD_WHOLESALE_PART,value:this.controller.config.supplierId})}},optionalPartIcon:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.ADD_OPTIONAL_PART,value:this.controller.config.part})}},supplierPrompt:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.supplierPromptClicked||(PhaserGame.showSupplierNotification(),PhaserGame.supplierPromptClicked=!0)}},wholesalePartPrompt:{inputDown:function(){trace("wholesalePartPrompt/inputDown"),PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.OPEN_WHOLESALE_PARTS_MENU,value:this.controller.config.part})}},closedEnvelope:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.ViewManager.hideView("turnEnd:closedEnvelope"),PWG.ViewManager.showView("global:confirmButton"),PhaserGame.addYearEndReport()}},openedEnvelope:{inputDown:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"brief"})}}},buttonCallbacks:{openManual:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"manual"})},share:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),window.open(FACEBOOK_URL)},manualStart:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"manual"})},worldStart:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy();var a=PWG.ViewManager.getControllerFromPath("home:ignitionKey");a.view.events.onAnimationComplete.add(PhaserGame.ignitionAnimationCompleted,this),PWG.PhaserAnimation.play(a.name,"turnOn")},worldReturnButton:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),"world"!==PWG.ScreenManager.currentId?PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"world"}):PhaserGame.zoomedIn&&PhaserGame.worldZoomOut()},plusButton:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.worldZoomOut()},minusButton:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.worldZoomIn()},usDetailStart:function(){},northeastDetail:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.zoomedIn||(PhaserGame.activeSector=USSectors.NORTH_EAST,PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"usDetail"}))},southeastDetail:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.zoomedIn||(PhaserGame.activeSector=USSectors.SOUTH_EAST,PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"usDetail"}))},midwestDetail:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.zoomedIn||(PhaserGame.activeSector=USSectors.MID_WEST,PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"usDetail"}))},northwestDetail:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.zoomedIn||(PhaserGame.activeSector=USSectors.NORTH_WEST,PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"usDetail"}))},southwestDetail:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.zoomedIn||(PhaserGame.activeSector=USSectors.SOUTH_WEST,PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"usDetail"}))},buildingAddConfirm:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.ADD_BUILDING})},buildingAddCancel:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CLOSE_BUILDINGS_MENU})},equipmentListStart:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentList"})},addEquipment:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentCreate"})},newBasicTractor:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.MACHINE_TYPE_SELECTION,value:EquipmentTypes.TRACTOR,size:EquipmentSizes.BASIC})},newBasicSkidsteer:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.MACHINE_TYPE_SELECTION,value:EquipmentTypes.SKIDSTEER,size:EquipmentSizes.BASIC})},newMediumTractor:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.MACHINE_TYPE_SELECTION,value:EquipmentTypes.TRACTOR,size:EquipmentSizes.MEDIUM})},newMediumSkidsteer:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.MACHINE_TYPE_SELECTION,value:EquipmentTypes.SKIDSTEER,size:EquipmentSizes.MEDIUM})},newHeavyTractor:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.MACHINE_TYPE_SELECTION,value:EquipmentTypes.TRACTOR,size:EquipmentSizes.HEAVY})},newHeavySkidsteer:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.MACHINE_TYPE_SELECTION,value:EquipmentTypes.SKIDSTEER,size:EquipmentSizes.HEAVY})},partsMenuClose:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CLOSE_PARTS_MENU})},optionalPartsMenuClose:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CLOSE_OPTIONAL_PARTS_MENU})},equipmentCreateClose:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentList"})},confirmButton:function(){if(PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.confirmAction)PhaserGame.confirmAction.method.call(this,PhaserGame.confirmAction.params),PhaserGame.confirmAction=null;else switch(PWG.ScreenManager.currentId){case"brief":PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"world"});break;case"equipmentEdit":PWG.EventCenter.trigger({type:Events.SAVE_MACHINE});break;case"turnEnd":PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"brief"})}},cancelButton:function(){PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.cancelAction&&(PhaserGame.cancelAction.method.call(this,PhaserGame.cancelAction.params),PhaserGame.cancelAction=null)},backButton:function(){if(PhaserGame.tutorialOpen&&PhaserGame.removeTutorialGuy(),PhaserGame.backAction)PhaserGame.backAction.call(this);else switch(PWG.ScreenManager.currentId){case"brief":PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"home"});break;case"world":PhaserGame.showEndTurnPrompt();break;case"manual":PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"home"});break;case"usDetail":PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"world"});break;case"buildingEdit":PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"usDetail"});break;case"equipmentList":PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"buildingEdit"});break;case"equipmentCreate":PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentList"});break;case"equipmentEdit":PhaserGame.machineDirty,PWG.ViewManager.hideView("global:equipmentEditGroup"),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentList"})}}},screens:{home:{create:function(){PWG.ViewManager.showView("global:homeGroup"),PWG.ViewManager.hideView("global:turnGroup"),PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.hideView("global:backButton"),TurnManager.playerData.firstPlay[TutorialTypes.INIT]&&(PhaserGame.activeTutorial=TutorialTypes.INIT,PhaserGame.addTutorialGuy())},shutdown:function(){PWG.ViewManager.hideView("global:homeGroup");var a=PWG.ViewManager.getControllerFromPath("home:ignitionKey");PWG.PhaserAnimation.play(a.name,"idle")}},manual:{create:function(){PWG.ViewManager.hideView("global:homeGroup"),PWG.ViewManager.showView("global:backButton")},shutdown:function(){PWG.ViewManager.removeView("manualPages","manual")}},brief:{create:function(){var a=PWG.ViewManager.getControllerFromPath("brief"),b=gameData.levels[PhaserGame.playerData.level].brief,c=PWG.Utils.clone(PhaserGame.config.dynamicViews.missionBrief),d=PhaserGame.config.dynamicViews.goalText,e=PWG.Utils.clone(PhaserGame.config.dynamicViews.wiper);c.views.briefBg.img=b.background,PWG.Utils.each(b.text,function(a,b){var e=PWG.Utils.clone(d);e.name+=b,e.text=a,e.y+=b*e.offsetY,c.views["goal"+b]=e},this),PWG.ViewManager.addView(c,a,!0),PWG.ViewManager.addView(e,a,!0),PWG.ViewManager.showView("global:backButton"),PWG.ViewManager.hideView("global:turnGroup");var e=PWG.ViewManager.getControllerFromPath("brief:wiper:windshieldWiper");e.view.anchor.setTo(.5,.04);var f=PhaserGame.phaser.add.tween(e.view);f.onComplete.add(function(){e.view.events.onTweenComplete=null}),f.to({angle:-65},1e3,Phaser.Easing.Linear.None,!0,500*Math.random()),f.start(),PWG.ViewManager.showView("global:confirmButton")},shutdown:function(){PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.removeView("missionBrief","brief")}},world:{listeners:[{event:Events.WORLD_ZOOMED_IN,handler:function(){trace("WORLD ZOOMED IN"),PhaserGame.addTradeRouteViews(),PhaserGame.worldZoomedIn=!1}},{event:Events.WORLD_ZOOMED_OUT,handler:function(){}}],create:function(){TurnManager.playerData.firstPlay[TutorialTypes.WORLD]&&(PhaserGame.activeTutorial=TutorialTypes.WORLD,PhaserGame.addTutorialGuy());var a=PWG.ViewManager.getControllerFromPath("world:worldMap");PhaserGame.worldView=a.view;{var b=PWG.ViewManager.getControllerFromPath("world"),c=PWG.Utils.clone(PhaserGame.config.dynamicViews.buildingPins);PhaserGame.config.worldPositions}PWG.Utils.each(TurnManager.playerData.sectors,function(a,b){var d=PWG.Utils.objLength(a);
if(d>0){var e=(PhaserGame.config.palette,{plant:0,dealership:0,tradeRoute:0});if(PWG.Utils.each(a,function(a){e[a.type]++},this),e.plant>0){var f=PhaserGame.formatBuildingPin(BuildingTypes.PLANT,b,e[BuildingTypes.PLANT]);c.views[f.name]=f}if(e.dealership>0){var f=PhaserGame.formatBuildingPin(BuildingTypes.DEALERSHIP,b,e[BuildingTypes.DEALERSHIP]);c.views[f.name]=f}}},this),PWG.ViewManager.addView(c,b,!0),PhaserGame.buildingPins=PWG.ViewManager.getControllerFromPath("world:buildingPins").view,PhaserGame.worldZoomInitialized||PhaserGame.initWorldZoom(a.view,PhaserGame.buildingPins),PhaserGame.worldZoomOutFull(),PhaserGame.currentZoom=4,PhaserGame.activeSector=-1,PWG.ViewManager.showView("global:turnGroup"),PWG.ViewManager.showView("global:plusMinusGroup")},shutdown:function(){PhaserGame.removeTradeRouteViews(),PWG.ViewManager.removeView("buildingPins","world"),PWG.ViewManager.hideView("global:plusMinusGroup"),PhaserGame.worldView=null,PhaserGame.buildingPins=null,PhaserGame.zoomedInTriggered=!1}},usDetail:{listeners:[{event:Events.OPEN_BUILDINGS_MENU,handler:function(){this.buildingCreatePromptOpen||(PhaserGame.addBuildingCreatePrompt(),this.buildingCreatePromptOpen=!0)}},{event:Events.ADD_BUILDING,handler:function(){PhaserGame.addBuilding(BuildingTypes.PLANT)}},{event:Events.BUILDING_STATE_UPDATED,handler:function(a){var b=a.building.config;if(b.type===BuildingTypes.TRADE_ROUTE);else if(b.sector===PhaserGame.activeSector){var c="usDetail:usDetailGrid:usDetailGridItem"+b.cell,d=PWG.ViewManager.getControllerFromPath(c),e=b.type.toUpperCase()+"_"+b.state.toUpperCase(),f=TileCellFrames[e];PWG.ViewManager.setFrame(c,f),d.config.attrs.frame=f}}},{event:Events.INVENTORY_ADDED,handler:function(a){PhaserGame.inventoryAdded(a.plant,"usDetail:usDetailGrid")}},{event:Events.CLOSE_BUILDINGS_MENU,handler:function(){this.buildingCreatePromptOpen&&(PWG.ViewManager.removeView("buildingCreatePrompt","global"),PhaserGame.confirmAction=null,PhaserGame.cancelAction=null,PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.showView("global:backButton"),this.buildingCreatePromptOpen=!1)}}],create:function(){trace("us detail start, TurnManager.playerData.firstPlay[TutorialTypes.US_DETAIL] = "+TurnManager.playerData.firstPlay[TutorialTypes.US_DETAIL]),TurnManager.playerData.firstPlay[TutorialTypes.US_DETAIL]&&(PhaserGame.activeTutorial=TutorialTypes.US_DETAIL,PhaserGame.addTutorialGuy());var a=PWG.ViewManager.getControllerFromPath("usDetail"),b=PWG.Utils.clone(PhaserGame.config.dynamicViews.sectorBg),c=GridManager.grids[PhaserGame.activeSector],d=PWG.Utils.clone(PhaserGame.config.dynamicViews.usDetailGrid),e=PhaserGame.config.dynamicViews.usDetailGridItem;PWG.Utils.each(c,function(a,b){var c=PWG.Utils.clone(e);c.name+=b,c.x+=a.x,c.y+=a.y,c.attrs.frame=a.frame,c.cell=b,c.sector=PhaserGame.activeSector,c.input={inputDown:function(){return function(a){PhaserGame.tileClicked(a)}(c)}},d.views[b]=c},this),b.img=SectorGrids[PhaserGame.activeSector],PWG.ViewManager.addView(b,a,!0),PWG.ViewManager.addView(d,a,!0),PhaserGame.notifications[PhaserGame.activeSector].length>0&&PhaserGame.showNotificationEnvelope()},shutdown:function(){PhaserGame.notEnoughMoneyPromptActive&&(PWG.ViewManager.removeView("buildingCreatePrompt","global"),PhaserGame.confirmAction=null,PhaserGame.cancelAction=null,PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.showView("global:backButton"),this.buildingCreatePromptOpen=!1),PWG.ViewManager.removeGroupChildren("usDetail:usDetailGrid"),PhaserGame.hideNotificationEnvelope()}},buildingEdit:{listeners:[{event:Events.BUILDING_STATE_UPDATED,handler:function(a){var b=a.building.config;if(b.id===PhaserGame.activeBuilding.id){var c=PWG.Utils.clone(PhaserGame.config.dynamicViews.buildingEditDetails[b.type]);switch(b.type){case BuildingTypes.PLANT:var d=c.equipment.text+PWG.Utils.objLength(b.equipment)+" / "+BuildingManager.PLANT_MAX_MODELS,e=c.inventory.text+b.totalInventory+" / "+BuildingManager.PLANT_MAX_INVENTORY;PWG.ViewManager.callMethod("buildingEdit:editDetails:equipment","setText",[d],this),PWG.ViewManager.callMethod("buildingEdit:editDetails:inventory","setText",[e],this);break;case BuildingTypes.DEALERSHIP:var f=c.sales.text="$"+PWG.Utils.formatMoney(b.totalSales,0);PWG.ViewManager.callMethod("buildingEdit:editDetails:sales","setText",[f],this)}}}}],create:function(){TurnManager.playerData.firstPlay[TutorialTypes.PLANT_DETAILS]&&(PhaserGame.activeTutorial=TutorialTypes.PLANT_DETAILS,PhaserGame.addTutorialGuy());var a=PWG.ViewManager.getControllerFromPath("buildingEdit"),b=PhaserGame.activeBuilding,c=PWG.Utils.clone(PhaserGame.config.dynamicViews.buildingEditScreen),d=PWG.Utils.clone(PhaserGame.config.dynamicViews.buildingEditDetails[b.type]);switch(c.views.bg.img=d.bg.img,c.views.name.text+=b.name,c.views.status.text+=b.state.toUpperCase(),b.type){case BuildingTypes.PLANT:d.equipment.text+=PWG.Utils.objLength(b.equipment)+" / "+BuildingManager.PLANT_MAX_MODELS,d.inventory.text+=b.totalInventory+" / "+BuildingManager.PLANT_MAX_INVENTORY,d.dealerships.text+=PWG.Utils.objLength(b.dealerships)+" / "+BuildingManager.PLANT_MAX_DEALERSHIPS;break;case BuildingTypes.DEALERSHIP:var e=BuildingManager.sectors[PhaserGame.activeSector][b.plantId].config;d.plantMachine.text+=e.name+" / "+e.equipment[b.modelId].name,d.resell.text+="$"+PWG.Utils.formatMoney(b.resell,0),d.sales.text+="$"+PWG.Utils.formatMoney(b.totalSales,0)}PWG.Utils.each(d,function(a,b){"bg"!==b&&(c.views[a.name]=a)},this),PWG.ViewManager.addView(c,a,!0),b.type===BuildingTypes.PLANT&&PWG.ViewManager.showView("global:plantDetailGroup")},shutdown:function(){PWG.ViewManager.removeView("editDetails","buildingEdit"),PWG.ViewManager.hideView("global:plantDetailGroup")}},equipmentList:{listeners:[{event:Events.EDIT_MACHINE,handler:function(a){var b=TurnManager.playerData.sectors[PhaserGame.activeSector][PhaserGame.activeBuilding.id].equipment[a.value];PhaserGame.activeMachineType=b.type,PhaserGame.activeMachineSize=b.size,PhaserGame.activeMachine=new Machine(b),PhaserGame.newMachine=!1,PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentEdit"})}},{event:Events.INVENTORY_ADDED,handler:function(a){var b=a.plant;if(b.id===PhaserGame.activeBuilding.id){var c="x"+BuildingManager.getMachineModelInventory(b.id,a.machine);PWG.ViewManager.callMethod("equipmentList:machineList:machine"+a.machine+":available","setText",[c],this)}}}],create:function(){TurnManager.playerData.firstPlay[TutorialTypes.EQUIPMENT_LIST]&&(PhaserGame.activeTutorial=TutorialTypes.EQUIPMENT_LIST,PhaserGame.addTutorialGuy());var a=PhaserGame.activeBuilding.equipment,b=PWG.Utils.clone(PhaserGame.config.dynamicViews.machineList),c=PhaserGame.config.dynamicViews.machineIcon,d=PhaserGame.config.dynamicViews.emptyIcon,e=c.offsetX,f=c.offsetY,g=(c.iconW,c.iconH),h=(PWG.Stage.gameW/MACHINE_LIST_COLUMNS,0),i=0,j=MACHINE_LIST_ICONS-PWG.Utils.objLength(a);PWG.Utils.each(a,function(a,d){var j=PWG.Utils.clone(c),k=BuildingManager.getMachineModelInventory(a.plantId,a.id);j.name="machine"+d,j.views.bg.img=PhaserGame.config.machineIcons[a.type][a.size],j.views.name.text=a.name,j.views.cost.text="$"+a.cost,j.views.available.text="x"+k,j.views.invisButton.machineIdx=a.id,h%MACHINE_LIST_COLUMNS===0&&(i=g*(h/MACHINE_LIST_COLUMNS)+f);var l=e+PWG.Stage.gameW/2*(h%MACHINE_LIST_COLUMNS);PWG.Utils.each(j.views,function(a){a.x+=l,a.y+=i},this),b.views[j.name]=j,h++},this);for(var k=0;j>k;k++){var l=PWG.Utils.clone(d);h%MACHINE_LIST_COLUMNS===0&&(i=g*(h/MACHINE_LIST_COLUMNS)+f);var m=e+PWG.Stage.gameW/2*(h%MACHINE_LIST_COLUMNS);l.name="empty"+k,PWG.Utils.each(l.views,function(a){a.x+=m,a.y+=i},this),b.views[l.name]=l,h++}var n=PWG.ViewManager.getControllerFromPath("equipmentList");PWG.ViewManager.addView(b,n,!0),PWG.ViewManager.showView("global:equipmentListGroup")},shutdown:function(){PWG.ViewManager.removeView("machineList","equipmentList"),PWG.ViewManager.hideView("global:equipmentListGroup")}},equipmentCreate:{listeners:[{event:Events.MACHINE_TYPE_SELECTION,handler:function(a){PhaserGame.activeMachineType=a.value;var b=alphabet.UPPER[TurnManager.playerData.modelCount[a.value]],c=a.value+b,d=a.value.toUpperCase()+" "+b;PhaserGame.activeMachineSize=a.size,PhaserGame.activeMachine=new Machine({id:c,type:PhaserGame.activeMachineType,size:a.size,name:d,plantId:PhaserGame.activeBuilding.id}),PhaserGame.newMachine=!0,PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentEdit"})}}],create:function(){TurnManager.playerData.firstPlay[TutorialTypes.EQUIPMENT_CREATE]&&(PhaserGame.activeTutorial=TutorialTypes.EQUIPMENT_CREATE,PhaserGame.addTutorialGuy())}},equipmentEdit:{listeners:[{event:Events.NEXT_MACHINE_PIECE_ICON,handler:function(){PWG.ViewManager.hideView(PhaserGame.getCurrentMachinePiecePath()),PhaserGame.currentMachinePiece<PhaserGame.machinePieces.length-1?PhaserGame.currentMachinePiece++:PhaserGame.currentMachinePiece=0,PhaserGame.setSelectedMachinePieceSprite(),PWG.ViewManager.showView(PhaserGame.getCurrentMachinePiecePath())}},{event:Events.PREV_MACHINE_PIECE_ICON,handler:function(){PWG.ViewManager.hideView(PhaserGame.getCurrentMachinePiecePath()),PhaserGame.currentMachinePiece>1?PhaserGame.currentMachinePiece--:PhaserGame.currentMachinePiece=PhaserGame.machinePieces.length-1,PhaserGame.setSelectedMachinePieceSprite(),PWG.ViewManager.showView(PhaserGame.getCurrentMachinePiecePath())}},{event:Events.ADD_PART,handler:function(a){PhaserGame.activeMachine.setPart(PhaserGame.activePartType,a.value,!1),PWG.EventCenter.trigger({type:Events.CLOSE_PARTS_MENU}),PWG.EventCenter.trigger({type:Events.NEXT_MACHINE_PIECE_ICON})}},{event:Events.ADD_WHOLESALE_PART,handler:function(a){trace("ADD WHOLESALE PART");var b=PhaserGame.activePartType;PhaserGame.activeMachine.setPart(b,a.value,!0),PWG.EventCenter.trigger({type:Events.CLOSE_WHOLESALE_PARTS_MENU}),PWG.EventCenter.trigger({type:Events.NEXT_MACHINE_PIECE_ICON})}},{event:Events.REQUIRED_PART_ADDED,handler:function(a){trace("equipmentEdit/"+a.type+" hander");var b=PWG.ViewManager.getControllerFromPath("equipmentEdit:machineEdit:stars");b.view.frame++}},{event:Events.ADD_OPTIONAL_PART,handler:function(a){PhaserGame.activeMachine.setPart(a.value,0),PWG.EventCenter.trigger({type:Events.CLOSE_OPTIONAL_PARTS_MENU})}},{event:Events.SHOW_BUILD_GROUP,handler:function(a){PhaserGame.activeMachine.set("size",a.size),this.views["state-group"].children[a.previousGroup].hide(),this.views["state-group"].children["editor-group"].show()}},{event:Events.OPEN_PARTS_MENU,handler:function(a){PhaserGame.partsMenuOpen||PhaserGame.optionalPartsMenuOpen||(this.partsMenuType!==a.value&&(PhaserGame.resetAllMachinePieceSpriteFrames(),PWG.ViewManager.hideView(PhaserGame.getCurrentMachinePiecePath()),PhaserGame.currentMachinePiece=PhaserGame.getMachinePieceIndex(a.value),PhaserGame.setSelectedMachinePieceSprite(),PWG.ViewManager.showView(PhaserGame.getCurrentMachinePiecePath()),PhaserGame.populatePartsMenu.call(this,a.value,this.views)),PhaserGame.showPartsMenu(),this.partsMenuType=a.value,PhaserGame.partsMenuOpen=!0)}},{event:Events.CLOSE_PARTS_MENU,handler:function(){PhaserGame.partsMenuOpen&&(PhaserGame.hidePartsMenu(),PhaserGame.partsMenuOpen=!1),PhaserGame.wholesalePromptAdded&&PhaserGame.removeWholesalePartPrompt()}},{event:Events.OPEN_WHOLESALE_PARTS_MENU,handler:function(){trace("open wholesale parts menu event handler"),PhaserGame.removeWholesalePartPrompt(),PhaserGame.addWholesalePartsMenu()}},{event:Events.CLOSE_WHOLESALE_PARTS_MENU,handler:function(){PhaserGame.removeWholesalePartsMenu(),PhaserGame.wholesalePromptAdded&&PhaserGame.removeWholesalePartPrompt()}},{event:Events.OPEN_OPTIONAL_PARTS_MENU,handler:function(){PhaserGame.partsMenuOpen||PhaserGame.optionalPartsMenuOpen||(PhaserGame.optionalPartsMenuPopulated||(PhaserGame.populateOptionalPartsMenu.call(this,this.views),PhaserGame.optionalPartsMenuPopulated=!0),PWG.ViewManager.showView("optionalPartsMenu"),PhaserGame.optionalPartsMenuOpen=!0)}},{event:Events.CLOSE_OPTIONAL_PARTS_MENU,handler:function(){PhaserGame.optionalPartsMenuOpen&&(PWG.ViewManager.hideView("optionalPartsMenu"),PhaserGame.optionalPartsMenuOpen=!1)}},{event:Events.ADD_SUPPLIER_NOTIFICATION,handler:function(){PhaserGame.addSupplierNotification()}},{event:Events.MACHINE_PARTS_COMPLETE,handler:function(){PhaserGame.hideAllMachinePieceSprites(),PhaserGame.confirmAction=null,PWG.ViewManager.showView("global:confirmButton")}},{event:Events.SAVE_MACHINE,handler:function(){PhaserGame.activeMachine.save(),PhaserGame.newMachine&&(TurnManager.addMachineModel(PhaserGame.activeMachine.config),PhaserGame.newMachine=!1),PhaserGame.activeMachine=null,PhaserGame.machineDirty=!1,PWG.ViewManager.hideView("global:equipmentEditGroup"),PWG.EventCenter.trigger({type:Events.CHANGE_SCREEN,value:"equipmentList"})}}],create:function(){TurnManager.playerData.firstPlay[TutorialTypes.EQUIPMENT_EDIT]&&(PhaserGame.activeTutorial=TutorialTypes.EQUIPMENT_EDIT,PhaserGame.addTutorialGuy()),PhaserGame.machinePieces=[],PhaserGame.currentMachinePiece=0;var a=PhaserGame.activeMachineType,b=PhaserGame.activeMachineSize,c=gameData.machines[a][b].requiredParts,d=0,e=PWG.ViewManager.getControllerFromPath("equipmentEdit"),f=PWG.Utils.clone(PhaserGame.config.dynamicViews.stars),g=PWG.Utils.clone(PhaserGame.config.dynamicViews.machineEdit),h=PhaserGame.config.dynamicViews.machinePieceMenuItem,i=(PWG.Utils.clone(PhaserGame.config.dynamicViews.machinePieceSprites),PhaserGame.config.machinePieceSpriteConfig);g.views.bg.img=PhaserGame.config.machineEditBackgrounds[a][b];var j=PhaserGame.config.starsConfig[a][b];f.img=j.img,f.x=j.x,f.y=j.y,f.attrs.width=j.width,f.attrs.height=j.height,f.attrs.frame=PhaserGame.newMachine?0:j.frames,g.views.stars=f,PWG.Utils.each(c,function(c,e){var f=PWG.Utils.clone(h);if(f.name=c.name,f.views.name.text=gameData.partNames[c.name],d>0?f.attrs.visible=!1:f.x+=100,f.views.button.partValue=c.name,PhaserGame.machinePieces.push(f.name),d++,g.views.machinePieceName.views[c.name]=f,c.sprite){var j=PWG.Utils.clone(i[a][b][c.name]);0===e&&(j.attrs.frame=1),g.views.machinePieceSprites.views[j.name]=j}},this),PWG.ViewManager.addView(g,e,!0),PWG.ViewManager.showView("global:equipmentEditGroup"),PWG.ViewManager.hideView("global:backButton"),PWG.ViewManager.showView("global:cancelButton"),PhaserGame.cancelAction={method:function(){PhaserGame.addMachineDiscardPrompt()},params:{}},PhaserGame.spriteTranslations=gameData.machines[a][b].spriteTranslations,PhaserGame.machineDirty=!0},shutdown:function(){TurnManager.playerData.firstPlay[TutorialTypes.DEALERSHIP]&&(PhaserGame.activeTutorial=TutorialTypes.DEALERSHIP,PhaserGame.addTutorialGuy()),PhaserGame.machinePieces=null,PWG.ViewManager.removeView("machineEdit","equipmentEdit"),PWG.ViewManager.hideView("global:equipmentEditGroup"),PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.hideView("global:cancelButton"),PWG.ViewManager.showView("global:backButton"),PhaserGame.cancelAction=null,this.partsMenuType="",this.partsMenuOpen=!1,PhaserGame.machineDirty=!1}},turnEnd:{create:function(){PWG.ViewManager.hideView("global:turnGroup:homeButton"),PWG.ViewManager.hideView("global:backButton")},shutdown:function(){PWG.ViewManager.hideView("global:confirmButton"),PWG.ViewManager.removeView("yearSummary","turnEnd")}}}},GridManager=function(){var a={};return a.grids={},a.init=function(b,c,d,e){a.initGrid(b,c,d,e),a.initBuildings(TurnManager.playerData.sectors)},a.initGrid=function(b,c,d,e){PWG.Utils.each(b,function(b){var f=PWG.GridGenerator.createRectangle(c,d,e,e),g=[];PWG.Utils.each(f,function(a){g.push({frame:0,x:a.start.x,y:a.start.y})},this),a.grids[b]=g},this)},a.initBuildings=function(b){PWG.Utils.each(b,function(b,c){PWG.Utils.each(b,function(b){a.addBuilding(b,c)},this)},this)},a.addBuilding=function(b,c){if(b.type!==BuildingTypes.TRADE_ROUTE){var d=b.type.toUpperCase()+"_"+b.state.toUpperCase();a.grids[c][b.cell].frame=TileCellFrames[d]}},a.getRandomEmptyCellIndex=function(b){var c,d=a.grids[b],e=[];return PWG.Utils.each(d,function(a,b){0===a.frame&&e.push(b)},this),c=Math.floor(Math.random()*(e.length-1)+1),e[c]},a.updateBuildingState=function(b,c,d,e){if(d!==BuildingTypes.TRADE_ROUTE){var f=d.toUpperCase()+"_"+e.toUpperCase();a.grids[b][c].frame=TileCellFrames[f]}},a.update=function(){},a}(),TurnManager=function(){var a={bankAdjustments:0,profit:0,bonuses:0,newPlants:0,newDealerships:0,newTractorModels:0,newSkidsteerModels:0,newTractors:0,newSkidsteers:0,wholesalePartsUsed:0,emptiedWholesaleInventories:0,newBuildings:[],newMachineModels:[],newMachines:[],machinesSold:[],newSuppliers:[]},b={};return b.turns,b.currentData={},b.playerData={},b.init=function(){b.playerData=PWG.Utils.clone(PhaserGame.playerData),trace("TURN MANAGER: bank = "+b.playerData.bank)},b.startTurn=function(){b.currentData=PWG.Utils.clone(a),trace("	pre initiative, bank "+b.playerData.bank),b.playerData.bank+=gameData.levels[b.playerData.level].startingBank,trace("	post initiative, bank = "+b.playerData.bank),b.tempDealershipCount=b.playerData.buildingCount.dealership,b.tempSupplierCount=b.playerData.suppliers.length||0,b.tempTradeRouteCount={africa:0,asia:0,europe:0,middleEast:0,northPacific:0,southPacific:0,southAmerica:0},PWG.Utils.each(b.playerData.sectors,function(a){PWG.Utils.each(a,function(a){a.type===BuildingTypes.TRADE_ROUTE&&b.tempTradeRouteCount[TradeRouteLocations[a.worldLocation]]++},this)},this)},b.updateBank=function(a){b.playerData.bank+=a,b.currentData.bankAdjustments+=a,a>0&&(b.currentData.profit+=a,b.playerData.profit+=a),PWG.EventCenter.trigger({type:Events.BANK_UPDATED})},b.addBuilding=function(a){switch(b.playerData.sectors[a.sector][a.id]=a,b.currentData.newBuildings.push(a),b.playerData.buildingCount[a.type]++,a.type){case BuildingTypes.PLANT:b.currentData.newPlants++;break;case BuildingTypes.DEALERSHIP:b.currentData.newDealerships++;break;case BuildingTypes.TRADE_ROUTE:b.currentData.newTradeRoutes++}b.playerData.bonusPoints+=gameData.bonuses.buildings[a.type],PWG.EventCenter.trigger({type:Events.BONUSES_UPDATED})},b.updateBuilding=function(a){b.playerData.sectors[a.sector][a.id]=a},b.addMachineModel=function(a){BuildingManager.addMachineModelToPlant(PhaserGame.activeSector,PhaserGame.activeBuilding.id,a),b.playerData.modelCount[PhaserGame.activeMachineType]++,b.currentData.newMachineModels.push(a),a.type===EquipmentTypes.TRACTOR?b.currentData.newTractorModels++:a.type===EquipmentTypes.SKID_STEER&&b.currentData.newSkidsteerModels++},b.addPlantInventory=function(a){b.currentData.newMachines.push(a),a.type===EquipmentTypes.TRACTOR?b.currentData.newTractors++:a.type===EquipmentTypes.SKID_STEER&&b.currentData.newSkidsteers++,b.playerData.machinesBuilt[a.type]++,b.playerData.machinesBuilt.total++;var c=b.playerData.machinesBuilt.total;PWG.Utils.each(gameData.bonuses.manufacturing,function(a,d){c>=a&&!b.playerData.bonusesAchieved[d]&&(b.playerData.bonusesAchieved[d]=!0,b.playerData.bonusPoints+=gameData.bonuses.manufacturing[d],PWG.EventCenter.trigger({type:Events.BONUSES_UPDATED}))},this)},b.removePlantInventory=function(){},b.sellMachine=function(a,c){b.currentData.machinesSold.push(a),b.updateBank(c)},b.addSupplier=function(a){b.playerData.suppliers[a.id]=a,b.currentData.newSuppliers.push(a),b.playerData.bonusPoints+=gameData.bonuses.suppliers.added,PWG.EventCenter.trigger({type:Events.BONUSES_UPDATED})},b.wholesalePartUsed=function(){b.currentData.wholesalePartsUsed++},b.wholesaleInventoryEmptied=function(){trace("TurnManager/wholesaleInventoryEmptied"),b.currentData.emptiedWholesaleInventories++,b.playerData.bonusPoints+=gameData.bonuses.suppliers.allPartsUsed,PWG.EventCenter.trigger({type:Events.BONUSES_UPDATED})},b.get=function(a){return b.playerData.hasOwnProperty(a)?b.playerData[a]:b.currentData.hasOwnProperty(a)?b.currentData[a]:void 0},b}(),BuildingManager=function(){function a(a){this.config=a,this.config.state=a.state||BuildingStates.CONSTRUCTION,this.config.age=a.age||0}function b(b){b.type=BuildingTypes.PLANT,a.call(this,b),this.config.equipment=b.equipment||{},this.config.inventory=b.inventory||{},this.config.dealerships=b.dealerships||{},this.config.tradeRoutes=b.tradeRoutes||{},this.dealershipNotifications={},this.tradeRouteNotifications={},PWG.Utils.objLength(this.config.equipment)>0&&PWG.Utils.each(this.config.equipment,function(a){this.dealershipNotifications[a.id]=!1,this.tradeRouteNotifications[a.id]=!1},this),this.config.totalInventory=0,PWG.Utils.objLength(this.config.inventory)>0&&PWG.Utils.each(this.config.inventory,function(a){this.config.totalInventory+=a.length},this)}function c(b){b.type=BuildingTypes.DEALERSHIP;var c=e.findBuilding(b.plantId),d=c.config.equipment[b.modelId],f=Math.floor(Math.random()*(this.resellMaxMultiplier-1)+2);a.call(this,b),this.config.resell=b.resell||f*d.cost+e.MACHINE_PRODUCTION_COST,this.config.maxPerYear=b.maxPerYear||Math.floor(Math.random()*(e.DEALERSHIP_MAX_SALES_PER_YEAR-e.DEALERSHIP_MIN_SALES_PER_YEAR)+e.DEALERSHIP_MIN_SALES_PER_YEAR),this.config.inventory=b.inventory||[],this.config.totalSales=b.totalSales||0,this.numberSold=0}function d(b){b.type=BuildingTypes.TRADE_ROUTE;var c=e.findBuilding(b.plantId),d=c.config.equipment[b.modelId],f=Math.floor(Math.random()*(this.resellMaxMultiplier-1)+3);a.call(this,b),this.config.resell=b.resell||f*d.cost+e.MACHINE_PRODUCTION_COST,this.config.maxPerYear=b.maxPerYear||Math.floor(Math.random()*(e.TRADE_ROUTE_MAX_SALES_PER_YEAR-e.TRADE_ROUTE_MIN_SALES_PER_YEAR)+e.DEALERSHIP_MIN_SALES_PER_YEAR),this.config.inventory=b.inventory||[],this.config.totalSales=b.totalSales||0}var e={};return e.PLANT_MAX_MODELS=6,e.PLANT_MIN_SELL_INVENTORY=3,e.PLANT_MIN_EXPORT_INVENTORY=5,e.PLANT_MAX_INVENTORY=100,e.PLANT_MAX_DEALERSHIPS=6,e.DEALERSHIP_MAX_INVENTORY=50,e.DEALERSHIP_MAX_SALE_QUANTITY=5,e.DEALERSHIP_MAX_SALES_PER_YEAR=25,e.DEALERSHIP_MIN_SALES_PER_YEAR=10,e.TRADE_ROUTE_MAX_SALE_QUANTITY=10,e.TRADE_ROUTE_MAX_SALES_PER_YEAR=25,e.TRADE_ROUTE_MIN_SALES_PER_YEAR=10,e.TIME_TO_BUILD_MACHINE=2,e.TIME_TO_SELL_MACHINES=3,e.MACHINE_PRODUCTION_COST=2e4,a.prototype.capacity=0,a.prototype.equipment={},a.prototype.inventory={},a.prototype.update=function(){this.config.state===BuildingStates.CONSTRUCTION&&this.config.age>=this.constructionTime&&(this.config.state=BuildingStates.ACTIVE,PWG.EventCenter.trigger({type:Events.BUILDING_STATE_UPDATED,building:this})),this.config.age++,e.updateBuildingData.call(this,this.config)},PWG.Utils.inherit(b,a),b.prototype.constructionTime=3,b.prototype.buildTime=0,b.prototype.modelCapacity=6,b.prototype.addMachineModel=function(a){this.config.equipment[a.id]=a,this.config.inventory[a.id]=[],this.dealershipNotifications[a.id]=!1,this.tradeRouteNotifications[a.id]=!1},b.prototype.associateBuilding=function(a,b){this.config[b][a.config.modelId]=a.config.id,TurnManager.updateBuilding(this.config)},b.prototype.update=function(){this.config.state!==BuildingStates.PAUSED&&(b._super.update.apply(this,arguments),PWG.Utils.objLength(this.config.equipment)>0?this.buildTime>=e.TIME_TO_BUILD_MACHINE?(PWG.Utils.each(this.config.equipment,function(a){if(a.active){var b=a.cost+e.MACHINE_PRODUCTION_COST;if(TurnManager.playerData.bank>b&&this.config.totalInventory<e.PLANT_MAX_INVENTORY){var c=!0;if(PWG.Utils.objLength(a.wholesaleParts)>0&&(trace("THIS MACHINE "+a.id+" USES WHOLESALE PARTS"),PWG.Utils.each(a.wholesaleParts,function(b,c){var d=WholesaleManager.suppliers[b];d.quantity>0?WholesaleManager.usePart(c,size,b):(trace("	and there are none left. :("),this.config.equipment[a.id].active=!1,wholesalePartsAdded=!1)},this)),c){if(PWG.EventCenter.trigger({type:Events.UPDATE_BANK,value:-b}),PWG.EventCenter.trigger({type:Events.BUILDING_STATE_UPDATED,building:this}),PWG.EventCenter.trigger({type:Events.INVENTORY_ADDED,plant:this.config,machine:a.id}),this.config.totalInventory++,this.config.inventory[a.id].push(a),TurnManager.addPlantInventory(a),this.config.inventory[a.id].length>e.PLANT_MIN_EXPORT_INVENTORY&&TurnManager.get("level")>=MIN_TRADE_ROUTE_LEVEL)if(this.config.tradeRoutes.hasOwnProperty(a.id)){var d=this.config.tradeRoutes[a.id],f=e.findBuilding(d);if(f.config.state===BuildingStates.ACTIVE){{this.config.inventory[a.id]}f.addInventory(this.config)}}else this.tradeRouteNotifications[a.id]||(e.createTradeRoute(this,a.id),this.tradeRouteNotifications[a.id]=!0);if(this.config.inventory[a.id].length>e.PLANT_MIN_SELL_INVENTORY)if(this.config.dealerships.hasOwnProperty(a.id)){var g=this.config.dealerships[a.id],h=e.findBuilding(g);if(h.config.state===BuildingStates.ACTIVE){{this.config.inventory[a.id]}h.addInventory(this.config)}}else this.dealershipNotifications[a.id]||(e.createDealership(this,a.id),this.dealershipNotifications[a.id]=!0);TurnManager.updateBuilding(this.config)}}}},this),this.buildTime=0):this.buildTime++:this.notifiedOfEquipmentNeeded||(this.notifiedOfEquipmentNeeded=!0))},PWG.Utils.inherit(c,a),c.prototype.constructionTime=1,c.prototype.sellTime=0,c.prototype.capacity=50,c.prototype.resellMaxMultiplier=6,c.prototype.quantityPerYear=25,c.prototype.addInventory=function(a){if(this.numberSold<this.config.maxPerYear){for(var b=this.config.modelId;a.inventory[b].length>0&&this.config.inventory.length<this.capacity;)this.config.inventory.push(a.inventory[b].pop()),a.totalInventory--,this.numberSold++;TurnManager.updateBuilding(this.config)}},c.prototype.update=function(){if(c._super.update.apply(this,arguments),this.config.state===BuildingStates.ACTIVE&&this.config.inventory.length>0)if(this.sellTime>=e.TIME_TO_SELL_MACHINES){var a=Math.floor(Math.random()*(e.DEALERSHIP_MAX_SALE_QUANTITY-1)+1);for(a>this.config.inventory.length&&(a=this.config.inventory.length);a>0;)TurnManager.sellMachine(this.config.inventory.pop(),this.config.resell),PWG.EventCenter.trigger({type:Events.BUILDING_STATE_UPDATED,building:this}),PWG.EventCenter.trigger({type:Events.MACHINE_SOLD,building:this.config}),this.config.totalSales+=this.config.resell,a--;TurnManager.updateBuilding(this.config),this.sellTime=0}else this.sellTime++},PWG.Utils.inherit(d,a),d.prototype.constructionTime=1,d.prototype.sellTime=0,d.prototype.capacity=50,d.prototype.resellMaxMultiplier=10,d.prototype.quantityPerYear=25,d.prototype.addInventory=function(a){if(this.config.inventory.length<this.capacity){for(var b=this.config.modelId;a.inventory[b].length>0&&this.config.inventory.length<this.capacity;)this.config.inventory.push(a.inventory[b].pop()),a.totalInventory--;TurnManager.updateBuilding(this.config)}},d.prototype.update=function(){if(d._super.update.apply(this,arguments),this.config.state===BuildingStates.ACTIVE&&this.config.inventory.length>0)if(this.sellTime>=e.TIME_TO_SELL_MACHINES){var a=Math.floor(Math.random()*(e.DEALERSHIP_MAX_SALE_QUANTITY-1)+1);for(a>this.config.inventory.length&&(a=this.config.inventory.length);a>0;)TurnManager.sellMachine(this.config.inventory.pop(),this.config.resell),PWG.EventCenter.trigger({type:Events.BUILDING_STATE_UPDATED,building:this}),PWG.EventCenter.trigger({type:Events.MACHINE_SOLD,building:this.config}),this.config.totalSales+=this.config.resell,a--;TurnManager.updateBuilding(this.config),this.sellTime=0}else this.sellTime++},e.sectors=[{},{},{},{},{}],e.dealerships=[],e.tradeRoutes=[],e.init=function(){PWG.Utils.each(TurnManager.playerData.sectors,function(a,f){PWG.Utils.each(a,function(a){a.type===BuildingTypes.PLANT?e.sectors[f][a.id]=new b(a):a.type===BuildingTypes.DEALERSHIP?e.sectors[f][a.id]=new c(a):a.type===BuildingTypes.TRADE_ROUTE&&(e.sectors[f][a.id]=new d(a))},this)},this)},e.createPlant=function(a){var c=BuildingTypes.PLANT,d=TurnManager.playerData.buildingCount[c];if(a.id=c+d,a.name=c.toUpperCase()+" "+(d+1),TurnManager.playerData.bank>=gameData.buildings[c].cost){var f=new b(a);return PWG.EventCenter.trigger({type:Events.UPDATE_BANK,value:-gameData.buildings[c].cost}),e.updateBuildings(f),!0}return!1},e.addMachineModelToPlant=function(a,b,c){e.sectors[a][b].addMachineModel(c)},e.createDealership=function(a,b){var d,e=(PWG.Utils.objLength(a.config.equipment),BuildingTypes.DEALERSHIP),f=e+(TurnManager.tempDealershipCount+1),g=e.toUpperCase()+" "+TurnManager.tempDealershipCount;if(TurnManager.tempDealershipCount++,d=a.config.equipment[b],!a.config.dealerships.hasOwnProperty(d.id)){var h=new c({id:f,name:g,modelId:d.id,plantId:a.config.id,sector:a.config.sector});PWG.EventCenter.trigger({type:Events.ADD_DEALERSHIP_NOTIFICATION,plant:a.config,dealership:h})}},e.addDealership=function(a){var b=e.findBuilding(a.config.plantId);b.associateBuilding(a,"dealerships"),e.dealerships.push(a),e.updateBuildings(a)},e.addInventoryToDealership=function(a,b){var c=e.sectors.factories[a].equipment,d=e.sectors.dealerships[b];c.length>0&&PWG.Utils.each(c,function(a){d.inventory.push(a)},this)},e.createTradeRoute=function(a,b){var c,e=(PWG.Utils.objLength(a.config.equipment),BuildingTypes.TRADE_ROUTE),f=Math.floor(Math.random()*TradeRouteLocations.length),g=TradeRouteLocations[f],h=e+"_"+g+(TurnManager.tempTradeRouteCount[g]+1),i=TradeRouteNames[g].toUpperCase()+"\n"+e.toUpperCase()+" "+(TurnManager.tempTradeRouteCount[g]+1);if(TurnManager.tempTradeRouteCount[g]++,c=a.config.equipment[b],!a.config.tradeRoutes.hasOwnProperty(c.id)){var j=new d({id:h,name:i,worldLocation:f,modelId:c.id,plantId:a.config.id,sector:a.config.sector});PWG.EventCenter.trigger({type:Events.ADD_TRADE_ROUTE_NOTIFICATION,plant:a.config,tradeRoute:j})}},e.addTradeRoute=function(a){var b=e.findBuilding(a.config.plantId);b.associateBuilding(a,"tradeRoutes"),e.tradeRoutes.push(a),e.updateBuildings(a)},e.addInventoryToTradeRoute=function(a,b){var c=e.sectors.factories[a].equipment,d=e.sectors.tradeRoutes[b];c.length>0&&PWG.Utils.each(c,function(a){d.inventory.push(a)},this)},e.updateBuildings=function(a){e.sectors[a.config.sector][a.config.id]=a,e.addBuildingToTurnManager(a.config)},e.update=function(){PWG.Utils.each(e.sectors,function(a){PWG.Utils.each(a,function(a){a.update()},this)},e),PWG.Utils.each(e.dealerships,function(a){a.update()},this),PWG.Utils.each(e.tradeRoutes,function(a){a.update()},this)},e.getBuilding=function(a,b){var c={};return PWG.Utils.each(e.sectors[a],function(a){a.config.cell===b&&(c=a.config)},this),c},e.findBuilding=function(a){var b=null;return PWG.Utils.each(e.sectors,function(c){c.hasOwnProperty(a)&&(b=c[a])},this),b},e.getMachineModelInventory=function(a,b){var c=0,d=e.findBuilding(a);return d.config.inventory[b]&&(c=d.config.inventory[b].length),c},e.addBuildingToTurnManager=function(a){TurnManager.addBuilding(a)},e.updateBuildingData=function(a){TurnManager.updateBuilding(a)},e.getPlantModelCapacity=function(){return b.modelCapacity},e.getExistingTradeRoutes=function(){var a={};return PWG.Utils.each(e.sectors,function(b){PWG.Utils.each(b,function(b){b.config.type===BuildingTypes.TRADE_ROUTE&&(a[b.config.id]=b.config)},this)},this),a},e.removeBuilding=function(a,b){e.sectors[a].hasOwnProperty(b)&&delete e.sectors[a][b]},e}(),TradeRouteManager=function(){var a={};return a}(),WholesaleManager=function(){function a(a){trace("Supplier/constructor, config = ",a),this.config=a,this.config.quantity=a.quantity||b.calculateQuantity(),this.config.cost=a.cost||b.calculateCostModifier(this.config)}var b={};return b.SUPPLIERS_PER_PART_MAX=3,b.SUPPLIERS_PER_TURN_MULTIPLIER=5,b.WEEK_LAG_AMOUNT=3,b.POSSIBILE_SUPPLIER_CHANCE=4,b.PARTS_COST_MODIFIER_MAX=5,b.PARTS_COST_MODIFIER_MIN=2,b.PARTS_QUANTITY_MAX=10,b.PARTS_QUANTITY_MIN=1,b.PARTS_QUANTITY_MULTIPLIER=100,b.suppliers={},b.parts={},b.init=function(){trace("WholesaleManager/init"),b.suppliersAdded=0,b.notificationActive=!1,b.turnMax=Math.floor(Math.random()*(b.SUPPLIERS_PER_TURN_MULTIPLIER-1)+1)+TurnManager.playerData.level,trace("	turnMax = "+b.turnMax),b.weekLag=0,PWG.Utils.each(PartTypes,function(a){b.parts[a]={},PWG.Utils.each(EquipmentSizes,function(c){b.parts[a][c]={}},this)},this),PWG.Utils.each(TurnManager.playerData.suppliers,function(c){trace("		suppliers["+c.id+"] = ",c),b.suppliers[c.id]=new a(c),c.quantity>0&&(b.parts[c.partType][c.partSize][c.id]=c)
},this)},b.update=function(){if(!b.notificationActive&&(trace("WholesaleManager/update\n"),b.suppliersAdded<b.turnMax&&(b.weekLag++,b.weekLag>b.WEEK_LAG_AMOUNT))){trace("	added = "+b.suppliersAdded+" / "+b.turnMax+"\n	weekLag = "+b.weekLag+" / "+b.WEEK_LAG_AMOUNT),b.weekLag=0;var a=PWG.Utils.diceRoll();if(trace("	diceRoll = "+a+", chance = "+b.POSSIBILE_SUPPLIER_CHANCE),a>=b.POSSIBILE_SUPPLIER_CHANCE){var c={},d=(gameData.parts,PWG.Utils.randomProperty(PartTypes));trace("	type = "+d);var e=PWG.Utils.randomKey(gameData.parts[d]);trace("	size = "+e);var f=Math.floor(Math.random()*(gameData.parts[d][e].length-1));trace("	quality = "+f),PWG.Utils.objLength(b.parts[d][e])<b.SUPPLIERS_PER_PART_MAX&&(c.part=gameData.parts[d][e][f],c.partType=d,c.partSize=e,c.partDescription=PartDescriptions[d],b.notificationActive=!0,b.createSupplier(c))}}},b.createSupplier=function(b){trace("WholesaleManager/createSupplier, confg = ",b);var c=BuildingTypes.SUPPLIER,d=TurnManager.tempSupplierCount;b.id=c+d,b.name=c.toUpperCase()+" "+(d+1),b.location=SupplierLocations[Math.floor(Math.random()*SupplierLocations.length)],TurnManager.tempSupplierCount++;var e=new a(b);PWG.EventCenter.trigger({type:Events.ADD_SUPPLIER_NOTIFICATION,supplier:e})},b.addSupplier=function(a){trace("WhoelsaleManager/addSupplier"),b.notificationActive=!1,b.suppliersAdded++,b.suppliers[a.config.id]=a,trace("	adding supplier to parts["+a.config.partType+"]["+a.config.partSize+"]["+a.config.id+"]"),b.parts[a.config.partType][a.config.partSize][a.config.id]=a.config,trace("	parts now = ",b.parts),TurnManager.addSupplier(a.config)},b.getTotalPartTypeCount=function(a,c){var d=0;if(b.parts.hasOwnProperty(a)&&b.parts[a].hasOwnProperty(c)){var e=b.parts[a][c];PWG.Utils.each(e,function(a){d+=a.quantity},this)}return trace("WholesaleManager/hasPart: "+a+"."+c+" = "+d),d},b.usePart=function(a,c,d){trace("WholesaleManager/usePart: "+a+"."+c+", quantity = "+b.parts[a][c][d].quantity);var e=b.parts[a][c][d];e.quantity>0&&(e.quantity--,TurnManager.wholesalePartUsed(),e.quantity<=0&&b.removeSupplierFromParts(e))},b.removeSupplierFromParts=function(a){trace("WholesaleManager/removeSupplierFromParts"),delete b.parts[a.partType][a.partSize][a.id],TurnManager.wholesaleInventoryEmptied(a)},b.calculateQuantity=function(){return Math.floor(Math.random()*(b.PARTS_QUANTITY_MAX-b.PARTS_QUANTITY_MIN)+b.PARTS_QUANTITY_MIN)*b.PARTS_QUANTITY_MULTIPLIER},b.calculateCostModifier=function(a){trace("WholesaleManager/calculateCostModifier, config = ",a);var c=a.part.cost;trace("baseCost = "+c);var d=Math.floor(Math.random()*(b.PARTS_COST_MODIFIER_MAX-b.PARTS_COST_MODIFIER_MIN)+b.PARTS_COST_MODIFIER_MIN);trace("	rand = "+d);var e=d/100;return trace("	costModifier = "+e),c*e*a.quantity},b}(),AnimationManager=function(){var a={};return a.animations={},a.active={},a.parents={},a.childKeys={},a.add=function(b){a.animations[b.key]||(a.animations[b.key]=[],a.parents[b.key]=PWG.ViewManager.getControllerFromPath(b.parentPath));var c=PWG.Utils.clone(PhaserGame.config.dynamicViews[b.type]);c.name=b.name,c.x+=b.x,c.y+=b.y,b.controller=PWG.ViewManager.addView(c,a.parents[b.key]),b.controller.view.events.onAnimationComplete.add(a.onAnimationComplete,this),a.animations[b.key].push(b),a.active[b.key]||(a.active[b.key]=!0,a.start(b.key))},a.getNextIndex=function(b){var c;return a.childKeys.hasOwnProperty(b)?a.childKeys[b]++:a.childKeys[b]=0,c=a.childKeys[b]},a.start=function(b,c){if(a.animations[b].length>0){var d=a.animations[b][0],e=c||d.animationName;a.active[b]||(a.active[b]=!0);{d.parentPath+":"+d.name}PWG.PhaserAnimation.play(d.name,e,!0)}},a.onAnimationComplete=function(b){var c=a.findConfig(b.name);a.active[c.key]=!1,a.removeView(c),a.animations[c.key]&&a.animations[c.key].length>0&&(a.animations[c.key].splice(0,1),a.start(c.key))},a.findConfig=function(b){var c={};return PWG.Utils.each(a.animations,function(a){PWG.Utils.each(a,function(a){a.name===b&&(c=a)},this)},this),c},a.removeView=function(a){a.parentPath+":"+a.name},a.reset=function(){PWG.Utils.each(a.animations,function(a,b){for(this.active[b]&&this.removeView(this.animations[b][0]);a.length>0;)a.pop();delete this.animations[b],delete this.parents[b],delete this.active[b]},a)},a}(),GameConfig=function(){var a={};return a.loadingAnimation=!0,a.init=function(a,b){var c=PWG.Stage.winW,d=PWG.Stage.winH,e=PWG.Stage.gameW,f=PWG.Stage.gameH,g=PWG.Stage.unit,h={left:{x:0},right:{x:e-7*g/3},bottom:{y:f-2.2*g},width:7*g/3,height:6*g/3},i={xxs:.25*g,xs:.3*g,sm:.4*g,md:.6*g,lg:1*g,xl:1.5*g},j={darkRed:"#ba1d3a",lightRed:"#e21a49",orange1:"#fca600",orange2:"#e9a547",orange3:"#e58f25",green:"#009b1d",black:"#000000",white:"#ffffff"},k={us:{x:.2*g,y:6*g,width:9.5*g,height:4.5*g},usSectors:[{x:5.7*g,y:6*g,width:4*g,height:2.5*g},{x:5.7*g,y:8.5*g,width:1.25*g,height:1.25*g},{x:3.7*g,y:6*g,width:2*g,height:4.5*g},{x:.2*g,y:6*g,width:3.5*g,height:2*g},{x:.2*g,y:8*g,width:3.5*g,height:2*g}]},l={us:{x:.2*g,y:6*g,width:9.5*g,height:4.5*g},usSectors:[{x:5.5*g,y:7.2*g},{x:5.5*g,y:9.4*g},{x:3.4*g,y:7*g},{x:1.3*g,y:6.4*g},{x:1.3*g,y:9*g}]},m={plant:{x:0*g,y:0*g},dealership:{x:.76*g,y:0*g}},n={plant:"pinPlant",dealership:"pinDealership",tradeRoute:"pinTradeRoute"},o={plant:[j.white,j.white,j.white,j.black,j.white],dealership:[j.black,j.white,j.white,j.black,j.white]},p={tutorial:{init:{content:"Hello! Let's get started.\nClick the gear below to\ncheck out the game manual.\nOtherwise, click the ignition to\nstart the game."},world:{content:"This is the world map.\nClick on a US Sector icon.\nto see to a detailed\nview of the area."},usDetail:{content:"This is a grid of locations\nin this area.\nClick an empty cell\nto create a new Plant."},plant:{content:"Your Plant has finished\nconstruction!\nClick on the Plant\nto see details."},plantDetails:{content:"Here are the details\nof your new Plant.\nNot much going on yet.\nClick the wrench."},equipmentList:{content:"This is a list of your Plant's\nTractors and Skid Steers.\nClick an empty slot\nto add a new model."},equipmentCreate:{content:"Click on a crate to choose\na new Tractor or Skid Steer\nmodel and its size."},equipmentEdit:{content:"Click the part name to\nsee the parts you can buy.\nThe machine behind me will cycle\nthrough parts to be added."},dealership:{content:"Great! Your Plant will now\nbegin manufacturing. Once it has\nmade 3, Dealerships will begin\n offering to sell your equipment.\nLook for the envelope in the\nUS Sector screen."},supplier:{content:""},traderoute:{content:""},outOfWholesaleParts:{content:""},allCompleted:{content:"CONGRATULATIONS!\nYou've become an expert\nGlobal Trader!\n\nWant to play more?\nTry to beat your previous score"}},notEnoughMoney:{content:"You need to earn\nmore money first"},buildingCreate:{content:"Add new Plant?"},dealership:{content:"We would like to sell ~{quantity}~\nper year of your\n~{plant}~ ~{model}~\ninventory at $~{resell}~ each."},supplierPrompt:{content:"Build Supplier\nRelationship"},supplierNotification:{content:"We would like to offer you\n~{quantity}~ ~{quality}~ ~{size}~\n~{type}~\nfor the cost of ~{cost}~."},wholesaleParts:{content:"Click here to view\nwholesale parts"},tradeRoute:{content:"We would like to import ~{quantity}~\nper year of your ~{plant}~\n~{model}~ inventory\nat $~{resell}~ each."}},q={dealership:"dealershipGirl",supplier:"supplierGuy",tradeRoutes:{africa:"tradeRouteAfricaNotification",asia:"tradeRouteAsiaNotification",europe:"tradeRouteEuropeNotification",middleEast:"tradeRouteMiddleEastNotification",southPacific:"tradeRouteSouthPacificNotification",southAmerica:"tradeRouteSouthAmericaNotification"}},r={africa:{img:"tradeRouteAfrica",x:1.8*g,y:6.45*g,attrs:{width:3.5*g,height:3.5*g*.43}},asia:{img:"tradeRouteAsia",x:1.8*g,y:5.5*g,attrs:{width:5.25*g,height:5.25*g*.19}},europe:{img:"tradeRouteEurope",x:1.8*g,y:6*g,attrs:{width:2.5*g,height:2.75*g*.2}},middleEast:{img:"tradeRoutePacificNorth",x:1.8*g,y:6.75*g,attrs:{width:4.25*g,height:4.25*g*.22}},southPacific:{img:"tradeRoutePacificSouth",x:1.8*g,y:6.75*g,attrs:{width:6*g,height:6*g*.4}},southAmerica:{img:"tradeRouteSouthAmerica",x:1.8*g,y:6.75*g,attrs:{width:1*g,height:1*g*2.03}}},s={africa:{x:4.6*g,y:7.75*g},asia:{x:6.75*g,y:5.75*g},europe:{x:4.25*g,y:5.9*g},middleEast:{x:5.75*g,y:6.25*g},southPacific:{x:7.5*g,y:8.5*g},southAmerica:{x:2.5*g,y:8.25*g}},t={africa:{x:4.75*g,y:8.25*g},asia:{x:7.25*g,y:6*g},europe:{x:4.75*g,y:6.25*g},middleEast:{x:6*g,y:6.5*g},southPacific:{x:7.75*g,y:8.5*g},southAmerica:{x:2.75*g,y:8.5*g}},u={tractor:{basic:{img:"starsThree",frames:3,x:e/2-.55*g*3/2,y:13.25*g,width:.55*g*3,height:.55*g*3*.2},medium:{img:"starsFour",frames:4,x:e/2-.55*g*4/2,y:13.25*g,width:.555*g*4,height:.555*g*4*.147},heavy:{img:"starsFive",frames:5,x:e/2-.56*g*5/2,y:13.25*g,width:.56*g*5,height:.56*g*5*.116}},skidsteer:{basic:{img:"starsFour",frames:4,x:e/2-.55*g*4/2,y:13.25*g,width:.555*g*4,height:.555*g*4*.147},medium:{img:"starsFive",frames:5,x:e/2-.56*g*5/2,y:13.25*g,width:.56*g*5,height:.56*g*5*.116},heavy:{img:"starsSix",frames:6,x:e/2-.565*g*6/2,y:13.25*g,width:.565*g*6,height:.565*g*6*.094}}},v={tractor:{basic:"tractorBasicBg",medium:"tractorMediumBg",heavy:"tractorHeavyBg"},skidsteer:{basic:"skidsteerBasicBg",medium:"skidsteerMediumBg",heavy:"skidsteerHeavyBg"}},w={tractor:{basic:{engine:{type:"sprite",name:"engine",img:"editTractorBasicEngine",x:.6*g,y:5.75*g,attrs:{width:4.8*g,height:4.8*g*1.1,frame:0}},tires:{type:"sprite",name:"tires",img:"editTractorBasicTires",x:.15*g,y:6.35*g,attrs:{width:8.7*g,height:8.7*g*.64,frame:0}},transmission:{type:"sprite",name:"transmission",img:"editTractorBasicCab",x:3.9*g,y:4.85*g,attrs:{width:3.05*g,height:3.05*g*1.47,frame:0}}},medium:{engine:{type:"sprite",name:"engine",img:"editTractorMediumEngine",x:1*g,y:6.5*g,attrs:{width:4*g,height:4*g*1.04,frame:0}},tires:{type:"sprite",name:"tires",img:"editTractorMediumTires",x:.35*g,y:4.9*g,attrs:{width:8.1*g,height:8.1*g*.89,frame:0}},transmission:{type:"sprite",name:"transmission",img:"editTractorMediumCab",x:3.68*g,y:3.4*g,attrs:{width:2.33*g,height:2.33*g*2.13,frame:0}}},heavy:{engine:{type:"sprite",name:"engine",img:"editTractorHeavyEngine",x:.5*g,y:5.55*g,attrs:{width:4.66*g,height:4.66*g*1.04,frame:0}},tracks:{type:"sprite",name:"tracks",img:"editTractorHeavyTracks",x:.35*g,y:7.4*g,attrs:{width:8.5*g,height:8.5*g*.57,frame:0}},transmission:{type:"sprite",name:"transmission",img:"editTractorHeavyCab",x:2.8*g,y:3.2*g,attrs:{width:4.75*g,height:4.75*g*1.31,frame:0}}}},skidsteer:{basic:{bucket:{type:"sprite",name:"bucket",img:"editSkidsteerBasicBucket",x:2*g,y:8.1*g,attrs:{width:6*g,height:6*g*.7,frame:0}},tires:{type:"sprite",name:"tires",img:"editSkidsteerBasicTires",x:1.6*g,y:8.4*g,attrs:{width:4.5*g,height:4.5*g*.64,frame:0}},transmission:{type:"sprite",name:"transmission",img:"editSkidsteerBasicCab",x:2.28*g,y:5.64*g,attrs:{width:3.25*g,height:3.25*g*1.09,frame:0}}},medium:{bucket:{type:"sprite",name:"bucket",img:"editSkidsteerMediumBucket",x:2.9*g,y:8.35*g,attrs:{width:5.2*g,height:5.2*g*.93,frame:0}},tires:{type:"sprite",name:"tires",img:"editSkidsteerMediumTires",x:1.73*g,y:8.55*g,attrs:{width:2.25*g,height:2.25*g*1.1,frame:0}},transmission:{type:"sprite",name:"transmission",img:"editSkidsteerMediumCab",x:2.125*g,y:5.62*g,attrs:{width:4*g,height:4*g*.91,frame:0}}},heavy:{bucket:{type:"sprite",name:"bucket",img:"editSkidsteerHeavyBucket",x:1.6*g,y:4.05*g,attrs:{width:7.1*g,height:7.1*g*.98,frame:0}},tracks:{type:"sprite",name:"tracks",img:"editSkidsteerHeavyTracks",x:.55*g,y:8.25*g,attrs:{width:6.75*g,height:6.75*g*.53,frame:0}},transmission:{type:"sprite",name:"transmission",img:"editSkidsteerHeavyCab",x:1.69*g,y:6.73*g,attrs:{width:4.5*g,height:4.5*g*.69,frame:0}},engine:{type:"sprite",name:"engine",img:"editSkidsteerHeavyEngine",x:4.05*g,y:9.15*g,attrs:{width:2.35*g,height:2.35*g*.69,frame:0}}}}},x={tutorialGuy:{type:"group",name:"tutorialGuy",views:{bg:{type:"sprite",name:"bg",img:"tutorialGuy",x:0,y:0,attrs:{width:e,height:f}},content:{type:"text",name:"content",text:"",x:1.66*g,y:2*g,style:{font:i.sm+"px Trebuchet MS",fill:j.white,"text-align":"center"},position:{centerX:!0}},submenuBg:{type:"sprite",name:"menuBg",img:"submenuBg",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34}},submenuText:{type:"text",name:"submenuText",text:"DISMISS",x:0,y:13.25*g,style:{font:i.md+"px Trebuchet MS",fill:j.orange3,align:"center"},position:{centerX:!0}},dismissButton:{type:"sprite",name:"dismissButton",img:"blockWhite",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34,alpha:0},input:gameLogic.input.dismissTutorial}}},manualPage:{type:"group",name:"manualPage",offsetY:2*g,views:{bg:{type:"sprite",name:"pageBg",img:"manualPage",x:0,y:0,attrs:{width:e,height:f}},title:{type:"text",name:"title",text:"",x:2*g,y:.5*g,style:{font:i.md+"px Trebuchet MS",fill:j.black,"text-align":"center"},position:{}},subtitle:{type:"text",name:"subtitle",text:"",x:2*g,y:2*g,style:{font:i.sm+"px Trebuchet MS",fill:j.black,"text-align":"center"},position:{}},invisButton:{type:"sprite",name:"invisButton",img:"blockWhite",x:0,y:0,attrs:{width:e,height:f,alpha:0},input:gameLogic.input.manualPage}}},manualPageText:{type:"text",name:"pageText",text:"",x:2*g,y:0,style:{font:i.xs+"px Trebuchet MS",fill:j.black}},manualPageImage:{type:"sprite",name:"pageImage",img:"",x:0,y:0,attrs:{width:0,height:0}},manualPageNumber:{type:"text",name:"pageNumber",text:"",x:2*g,y:f-3.5*g,style:{font:i.xs+"px Trebuchet MS",fill:j.black}},notification:{type:"group",name:"notification",views:{bg:{type:"sprite",name:"bg",img:"blockWhite",x:0,y:0,attrs:{width:e,height:f,alpha:.3}},person:{type:"sprite",name:"person",img:"",x:0,y:-(1*g),attrs:{width:e,height:f}},title:{type:"text",name:"title",text:"",x:0*g,y:2*g,style:{font:i.md+"px Trebuchet MS",fill:j.white},position:{centerX:!0}},content:{type:"text",name:"content",text:"",x:1.5*g,y:2*g,style:{font:i.sm+"px Trebuchet MS",fill:j.white}}}},missionBrief:{type:"group",name:"missionBrief",views:{briefBg:{type:"sprite",name:"briefBg",img:"",x:0,y:0,attrs:{width:e,height:f}},goalsText:{type:"sprite",name:"goalsTextImg",img:"goalsText",x:0,y:2*g,attrs:{width:e,height:.25*e}}}},wiper:{type:"group",name:"wiper",views:{windshieldWiper:{type:"sprite",name:"windshieldWiper",img:"windshieldWiper",x:e/2,y:.4*g,attrs:{width:1.15*g,height:1.15*g*11,angle:65}},windowFrame:{type:"sprite",name:"windowFrame",img:"windowFrame",x:0,y:0,attrs:{width:e,height:f}}}},goalText:{type:"text",name:"goal",text:"",offsetX:0,offsetY:1.5*g,x:.5*g,y:5*g,style:{font:i.md+"px Trebuchet MS",fill:j.white,"text-align":"center"},position:{centerX:!0}},endTurnPrompt:{type:"group",name:"endTurnPrompt",views:{bg:{type:"sprite",name:"bg",img:"endTurnPrompt",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34}}}},buildingPins:{type:"group",name:"buildingPins",views:{}},buildingPin:{type:"group",name:"buildingPin",views:{pin:{type:"sprite",name:"buildingPin",img:"",x:0,y:0,attrs:{width:.75*g,height:.75*g*.75}},locationCount:{type:"text",name:"locationCount",text:"x",x:.4*g,y:-(.2*g),style:{font:i.xs+"px Trebuchet MS",fill:j.white}}}},tradeRouteArrows:{type:"group",name:"tradeRouteArrows",views:{}},tradeRouteArrow:{type:"sprite",name:"tradeRouteArrow"},tradeRoutePins:{type:"group",name:"tradeRoutePins",views:{}},tradeRoutePin:{type:"group",name:"tradeRoutePin_",views:{pin:{type:"sprite",name:"pin",img:"pinTradeRoute",x:0,y:0,attrs:{width:.9*g,height:.9*g*.93}},locationCount:{type:"text",name:"locationCount",text:"x",x:.6*g,y:.25*g,style:{font:i.xs+"px Trebuchet MS",fill:j.black}}}},tradeRouteAlertIcons:{type:"group",name:"tradeRouteAlertIcons",views:{}},tradeRouteAvailableIcon:{type:"sprite",name:"tradeRouteAvailbleIcon",img:"tradeRouteIcon",x:0,y:0,attrs:{width:1*g,height:1*g*.93},input:gameLogic.input.tradeRouteAvailableIcon},tradeRoutePrompt:{type:"group",name:"tradeRoutePrompt",views:{menuBg:{type:"sprite",name:"menuBg",img:"submenuBg",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34}},title:{type:"text",name:"menuItemTitle",text:"",x:0,y:13*g,style:{font:i.sm+"px Trebuchet MS",fill:j.orange3,align:"center"},position:{centerX:!0}}}},sectorBg:{type:"sprite",name:"sectorBg",img:"",x:0,y:0,attrs:{width:e,height:f}},usDetailGrid:{type:"group",name:"usDetailGrid",views:{}},usDetailGridItem:{type:"sprite",name:"usDetailGridItem",img:"usDetailTiles",x:0,y:3.5*g,attrs:{width:e/6,height:e/6,frame:0}},plusSign:{type:"sprite",name:"plusSign",img:"animatedPlusIcon",x:.75*g,y:0,attrs:{width:.65*g,height:g},animation:{defaultAnimation:"idle",animations:Animations.plusIcon}},dollarSign:{type:"sprite",name:"dollarSign",img:"animatedDollarIcon",x:.75*g,y:0,attrs:{width:.65*g,height:g},animation:{defaultAnimation:"idle",animations:Animations.dollarIcon}},buildingCreatePrompt:{type:"group",name:"buildingCreatePrompt",views:{menuBg:{type:"sprite",name:"menuBg",img:"submenuBg",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34}},title:{type:"text",name:"menuItemTitle",text:"",x:0,y:13*g,style:{font:i.sm+"px Trebuchet MS",fill:j.orange3,align:"center"},position:{centerX:!0}},cost:{type:"text",name:"menuItemCost",text:"",x:0,y:13.5*g,style:{font:i.md+"px Trebuchet MS",fill:j.orange3},position:{centerX:!0}}}},dealershipPrompt:{type:"sprite",name:"dealershipPrompt",img:"dealershipRepresentativePrompt",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34}},buildingEditScreen:{type:"group",name:"editDetails",views:{bg:{type:"sprite",name:"background",img:"plantDetailBg",x:0,y:0,attrs:{width:e,height:f,fixedToCamera:!0}},name:{type:"text",name:"buildingName",text:"",x:1.5*g,y:3.5*g,style:{font:i.lg+"px Trebuchet MS",fill:j.white},position:{centerX:!0}},status:{type:"text",name:"buildingStatus",text:"",x:1.5*g,y:6*g,style:{font:i.md+"px Trebuchet MS",fill:j.white},position:{centerX:!0}}}},buildingEditDetails:{plant:{bg:{img:"plantDetailBg"},equipment:{type:"text",name:"equipment",text:"",x:1.5*g,y:7.75*g,style:{font:i.lg+"px Trebuchet MS",fill:j.white},position:{centerX:!0}},inventory:{type:"text",name:"inventory",text:"",x:1.5*g,y:9.75*g,style:{font:i.lg+"px Trebuchet MS",fill:j.white},position:{centerX:!0}},dealerships:{type:"text",name:"dealerships",text:"",x:1.5*g,y:11.75*g,style:{font:i.lg+"px Trebuchet MS",fill:j.white},position:{centerX:!0}}},dealership:{bg:{img:"dealershipDetailBg"},plantMachine:{type:"text",name:"plantMachine",text:"",x:1.5*g,y:8*g,style:{font:i.md+"px Trebuchet MS",fill:j.white},position:{centerX:!0}},resell:{type:"text",name:"resell",text:"",x:1.5*g,y:9.75*g,style:{font:i.lg+"px Trebuchet MS",fill:j.white},position:{centerX:!0}},sales:{type:"text",name:"sales",text:"",x:1.5*g,y:11.75*g,style:{font:i.lg+"px Trebuchet MS",fill:j.white},position:{centerX:!0}}}},machineList:{type:"group",name:"machineList",views:{}},machineIcon:{type:"group",name:"machineIcon",offsetY:1.5*g,offsetX:.25*g,iconW:4*g,iconH:4*g,width:e/2,views:{bg:{type:"sprite",name:"machineIconBg",img:"",x:0,y:.25*g,attrs:{width:4*g,height:3.5*g}},name:{type:"text",name:"name",text:"",x:.66*g,y:3.25*g,style:{font:i.sm+"px Trebuchet MS",fill:j.lightRed,"text-align":"center"}},cost:{type:"text",name:"machineCost",text:"",x:0*g,y:.85*g,style:{font:i.xxs+"px Trebuchet MS",fill:j.black},attrs:{angle:-45}},available:{type:"text",name:"available",text:"",x:3.5*g,y:.2*g,style:{font:i.sm+"px Trebuchet MS",fill:j.white},attrs:{angle:45}},alert:{type:"sprite",name:"alert",img:"exclamationAlert",x:3.25*g,y:0,attrs:{width:.75*g,height:.75*g,visible:!1}},invisButton:{type:"sprite",name:"machineIconInvisButton",img:"blockClear",machineIdx:"",x:0,y:0,attrs:{width:4*g,height:4*g},input:gameLogic.input.editMachine}}},emptyIcon:{type:"group",name:"emptyIcon",offsetY:1.5*g,offsetX:.5*g,iconW:4*g,iconH:4*g,views:{bg:{type:"button",name:"emptyIcon",img:"emptyIcon",x:0,y:.25*g,attrs:{width:4*g,height:3.5*g},callback:gameLogic.buttonCallbacks.addEquipment,context:this,frames:[0]}}},machineEdit:{type:"group",name:"machineEdit",views:{bg:{type:"sprite",name:"editorBg",img:"",x:0,y:.15*g,attrs:{width:e,height:f}},machinePieceSprites:{type:"group",name:"machinePieceSprites",views:{}},stars:{type:"sprite",name:"stars",img:"",x:-1,y:-1,attrs:{width:-1,height:-1}},machinePieceMenuNavigator:{type:"group",name:"machinePieceMenuNavigator",views:{partsNavigator:{type:"sprite",name:"partsNavigator",img:"partsNavigator",x:e/2-8*g/2,y:1.6*g,attrs:{width:8*g,height:8*g*.3}},title:{type:"text",name:"partName",text:"Choose Part Type",x:3*g,y:1.75*g,style:{font:i.sm+"px Trebuchet MS",fill:j.orange3},position:{centerX:!0}},forward:{type:"sprite",name:"forward",img:"blockWhite",x:e/2+2*g,y:1.5*g,attrs:{width:1*g,height:1*g,alpha:0},input:gameLogic.input.machinePieceForwardIcon},backward:{type:"sprite",name:"backward",img:"blockWhite",x:e/2-3*g,y:1.5*g,attrs:{width:1*g,height:1*g,alpha:0},input:gameLogic.input.machinePieceBackwardIcon}}},machinePieceName:{type:"group",name:"machinePieceName",views:{}},partsMenu:{type:"group",name:"partsMenu",attrs:{visible:!1},views:{menuBg:{type:"sprite",name:"menuBg",img:"partsFrame",x:0,y:0,attrs:{width:e,height:f}}}}}},stars:{type:"sprite",name:"stars",img:"",x:-1,y:-1,attrs:{width:-1,height:-1}},machinePieceMenuItem:{type:"group",name:"machinePieceMenuItem",x:e/2-2.5*g,y:2.5*g,attrs:{width:5*g,height:1.5*g},views:{name:{type:"text",name:"partName",text:"",x:3*g,y:2.75*g,style:{font:i.md+"px Trebuchet MS",fill:j.orange3},position:{centerX:!0}},button:{type:"sprite",name:"partButton",img:"blockWhite",x:e/2-3*g,y:2.5*g,attrs:{width:6*g,height:1*g,alpha:0},input:gameLogic.input.openPartsMenu}}},partIcons:{type:"group",name:"",attrs:{visible:!1},views:{items:{type:"group",name:"itemsGroup",views:{}}}},partIcon:{type:"group",name:"partIcon",offset:3.7*g,iconH:3.4*g,views:{bg:{type:"sprite",name:"menuItemBg",img:"blockWhite",x:.85*g,y:.25,attrs:{width:3*g,height:2.5*g,alpha:.1}},icon:{type:"sprite",name:"menuItemIcon",img:"",x:-(1.25*g),y:-(2.5*g),attrs:{width:7*g,height:7*g}},description:{type:"text",name:"menuItemDescription",text:"",x:5.5*g,y:.75*g,style:{font:i.sm+"px Trebuchet MS",fill:j.black}},cost:{type:"text",name:"menuItemCost",text:"",x:5.5*g,y:1.25*g,style:{font:i.md+"px Trebuchet MS",fill:j.black}},invisButton:{type:"sprite",name:"menuItemInvisBtn",img:"blockClear",partId:-1,x:.5*g,y:0,attrs:{width:e-g,height:3*g}}}},wholesalePartIcon:{type:"group",name:"partIcon",offset:3.7*g,iconH:3.4*g,views:{bg:{type:"sprite",name:"menuItemBg",img:"blockWhite",x:.85*g,y:.25,attrs:{width:3*g,height:2.5*g,alpha:.1}},icon:{type:"sprite",name:"menuItemIcon",img:"",x:-(1.25*g),y:-(2.5*g),attrs:{width:7*g,height:7*g}},description:{type:"text",name:"menuItemDescription",text:"",x:5.33*g,y:.75*g,style:{font:i.sm+"px Trebuchet MS",fill:j.black}},available:{type:"text",name:"menuItemCost",text:"",x:5.33*g,y:1.25*g,style:{font:i.sm+"px Trebuchet MS",fill:j.black}},invisButton:{type:"sprite",name:"menuItemInvisBtn",img:"blockClear",partId:-1,x:.5*g,y:0,attrs:{width:e-g,height:3*g}}}},optionalPartsMenu:{},supplierPrompt:{type:"group",name:"supplierPrompt",views:{menuBg:{type:"sprite",name:"menuBg",img:"submenuBg",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34}},title:{type:"text",name:"menuItemTitle",text:"",x:0,y:13*g,style:{font:i.sm+"px Trebuchet MS",fill:j.orange3,align:"center"},position:{centerX:!0}},invisButton:{type:"sprite",name:"supplierPromptButton",img:"blockClear",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34},input:gameLogic.input.supplierPrompt}}},supplierNotification:{type:"group",name:"supplierNotification",views:{bg:{type:"sprite",name:"supplierBg",img:"",x:0,y:0,attrs:{width:e,height:f}},content:{type:"text",name:"content",text:"",x:1.5*g,y:2*g,style:{font:i.sm+"px Trebuchet MS",fill:j.white}}}},discardMachinePrompt:{type:"group",name:"discardMachinePrompt",views:{menuBg:{type:"sprite",name:"menuBg",img:"submenuBg",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34}},title:{type:"text",name:"menuItemTitle",text:"DISCARD\nCHANGES?",x:0,y:13*g,style:{font:i.sm+"px Trebuchet MS",fill:j.orange3,align:"center"},position:{centerX:!0}}}},wholesalePartPrompt:{type:"group",name:"wholesalePartPrompt",views:{menuBg:{type:"sprite",name:"menuBg",img:"submenuBg",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34}},title:{type:"text",name:"menuItemTitle",text:"",x:0,y:13*g,style:{font:i.sm+"px Trebuchet MS",fill:j.orange3,align:"center"},position:{centerX:!0}},invisButton:{type:"sprite",name:"invisButton",img:"blockWhite",x:e/2-3*g,y:12.5*g,attrs:{width:6*g,height:6*g*.34,alpha:0},input:gameLogic.input.wholesalePartPrompt}}},yearSummary:{type:"group",name:"yearSummary",views:{}},summaryGoalText:{type:"text",name:"summaryGoalText",text:"",offsetX:0,offsetY:.75*g,x:1.25*g,y:6*g,style:{font:i.xs+"px Trebuchet MS",fill:""}},summaryText:{type:"text",name:"summaryText",text:"",offsetX:0,offsetY:.75*g,x:1.25*g,y:6*g,style:{font:i.md+"px Trebuchet MS",fill:""}}},y={gameEl:"game_container",gameType:"phaser",assets:{images:{blockWhite:"img/block_white.png",blockClear:"img/block_clear.png",gameBg:"img/screens/metal_background.gif",dashboardBottom:"img/dashboard_bottom.png",dashboardTop:"img/dashboard_top.png",submenuBg:"img/submenu_bg.png",smallEnvelope:"img/icons/small_envelope.png",homeBg:"img/screens/start/start.png",manualBg:"img/screens/manual/manual_background.png",manualPage:"img/screens/manual/manual_page.png",ssIgnition:"img/screens/manual/ss_ignition.png",ssGoals:"img/screens/manual/ss_goals.png",ssYearIndicators:"img/screens/manual/ss_year_indicators.png",ssUsSector:"img/screens/manual/ss_us_sector.png",ssGrid:"img/screens/manual/ss_grid.png",ssPlant:"img/screens/manual/ss_plant.png",ssPlantDetails:"img/screens/manual/ss_plant_details.png",ssEmptySlot:"img/screens/manual/ss_empty_slot.png",ssTractorMedium:"img/screens/manual/ss_tractor_medium.png",ssPartsNavigator:"img/screens/manual/ss_parts_navigator.png",ssPartsMenu:"img/screens/manual/ss_parts_menu.png",ssStars:"img/screens/manual/ss_stars.png",ssDealershipGirl:"img/screens/manual/ss_dealership_girl.png",ssDashboardTop:"img/screens/manual/ss_dashboard_top.png",ssYearEnd:"img/screens/manual/ss_year_end.png",ssDealershipEnvelope:"img/screens/manual/ss_dealership_envelope.png",ssFactoryProduction:"img/screens/manual/ss_plant_production.png",ssTradeRoutes:"img/screens/manual/ss_trade_routes.png",briefBg01:"img/screens/brief/mission_brief01.png",briefBg02:"img/screens/brief/mission_brief02.png",briefBg03:"img/screens/brief/mission_brief03.png",briefBg04:"img/screens/brief/mission_brief04.png",briefBg05:"img/screens/brief/mission_brief05.png",goalsText:"img/screens/brief/goals_text_img.png",windshieldWiper:"img/screens/brief/windshield_wiper.png",windshieldWiperMask:"img/screens/brief/windshield_wiper_mask.png",windowFrame:"img/screens/brief/window_frame.png",mapOcean:"img/screens/world/map_ocean2.png",mapWorld:"img/screens/world/map_world4.png",mapUS:"img/screens/world/map_us.png",endTurnPrompt:"img/screens/world/end_turn_prompt.png",pinPlant:"img/screens/world/pin_plant.png",pinDealership:"img/screens/world/pin_dealership.png",pinTradeRoute:"img/screens/world/pin_trade_route.png",exclamationAlert:"img/icons/exclamation5.png",tradeRouteAlertIcon:"img/icons/little_trade_route_alert.png",tradeRouteIcon:"img/screens/world/trade_route_icon.png",tradeRouteAfrica:"img/screens/world/trade_route_africa.png",tradeRouteAsia:"img/screens/world/trade_route_asia.png",tradeRouteEurope:"img/screens/world/trade_route_europe.png",tradeRouteMiddleEast:"img/screens/world/trade_route_middle_east.png",tradeRoutePacificSouth:"img/screens/world/trade_route_south_pacific.png",tradeRouteSouthAmerica:"img/screens/world/trade_route_south_america.png",sectorGridNE:"img/screens/us_detail/sector_grid_ne.png",sectorGridSE:"img/screens/us_detail/sector_grid_se.png",sectorGridMW:"img/screens/us_detail/sector_grid_mw.png",sectorGridNW:"img/screens/us_detail/sector_grid_nw.png",sectorGridSW:"img/screens/us_detail/sector_grid_sw.png",addNewPlantPrompt:"img/screens/us_detail/add_new_plant_prompt.png",dealershipRepresentativePrompt:"img/screens/us_detail/dealership_representative_prompt.png",plantDetailBg:"img/screens/building_edit/plant_detail.png",dealershipDetailBg:"img/screens/building_edit/dealership_detail.png",machineListIcon:"img/screens/equipment_list/machine_list_icon.png",skidsteerBasicIcon:"img/screens/equipment_list/skidsteer_basic_icon.png",skidsteerMediumIcon:"img/screens/equipment_list/skidsteer_medium_icon.png",skidsteerHeavyIcon:"img/screens/equipment_list/skidsteer_heavy_icon.png",tractorBasicIcon:"img/screens/equipment_list/tractor_basic_icon.png",tractorMediumIcon:"img/screens/equipment_list/tractor_medium_icon.png",tractorHeavyIcon:"img/screens/equipment_list/tractor_heavy_icon.png",emptyIcon:"img/screens/equipment_list/empty_icon2.png",equipmentCreateBg:"img/screens/equipment_add/equipment_add_bg.png",tractorBasicBg:"img/screens/equipment_edit/tractor_basic.png",tractorMediumBg:"img/screens/equipment_edit/tractor_medium.png",tractorHeavyBg:"img/screens/equipment_edit/tractor_heavy.png",skidsteerBasicBg:"img/screens/equipment_edit/skid_steer_basic.png",skidsteerMediumBg:"img/screens/equipment_edit/skid_steer_medium.png",skidsteerHeavyBg:"img/screens/equipment_edit/skid_steer_heavy.png",optionalPartsPlus:"img/screens/equipment_edit/optional_parts_plus.png",partsNavigator:"img/screens/equipment_edit/what_to_buy_menu.png",partsFrame:"img/screens/equipment_edit/parts_frame.png",engineBasicStandard:"img/screens/equipment_edit/parts_icons/engine/basic_standard.png",engineBasicPremium:"img/screens/equipment_edit/parts_icons/engine/basic_premium.png",engineBasicDeluxe:"img/screens/equipment_edit/parts_icons/engine/basic_deluxe.png",engineMediumStandard:"img/screens/equipment_edit/parts_icons/engine/medium_standard.png",engineMediumPremium:"img/screens/equipment_edit/parts_icons/engine/medium_premium.png",engineMediumDeluxe:"img/screens/equipment_edit/parts_icons/engine/medium_deluxe.png",engineHeavyStandard:"img/screens/equipment_edit/parts_icons/engine/heavy_standard.png",engineHeavyPremium:"img/screens/equipment_edit/parts_icons/engine/heavy_premium.png",engineHeavyDeluxe:"img/screens/equipment_edit/parts_icons/engine/heavy_deluxe.png",transmissionBasicStandard:"img/screens/equipment_edit/parts_icons/transmission/basic_standard.png",transmissionBasicPremium:"img/screens/equipment_edit/parts_icons/transmission/basic_premium.png",transmissionBasicDeluxe:"img/screens/equipment_edit/parts_icons/transmission/basic_deluxe.png",transmissionMediumStandard:"img/screens/equipment_edit/parts_icons/transmission/medium_standard.png",transmissionMediumPremium:"img/screens/equipment_edit/parts_icons/transmission/medium_premium.png",transmissionMediumDeluxe:"img/screens/equipment_edit/parts_icons/transmission/medium_deluxe.png",transmissionHeavyStandard:"img/screens/equipment_edit/parts_icons/transmission/heavy_standard.png",transmissionHeavyPremium:"img/screens/equipment_edit/parts_icons/transmission/heavy_premium.png",transmissionHeavyDeluxe:"img/screens/equipment_edit/parts_icons/transmission/heavy_deluxe.png",tiresBasicStandard:"img/screens/equipment_edit/parts_icons/tires/basic_standard.png",tiresBasicPremium:"img/screens/equipment_edit/parts_icons/tires/basic_premium.png",tiresBasicDeluxe:"img/screens/equipment_edit/parts_icons/tires/basic_deluxe.png",tiresMediumStandard:"img/screens/equipment_edit/parts_icons/tires/medium_standard.png",tiresMediumPremium:"img/screens/equipment_edit/parts_icons/tires/medium_premium.png",tiresMediumDeluxe:"img/screens/equipment_edit/parts_icons/tires/medium_deluxe.png",tracksHeavyStandard:"img/screens/equipment_edit/parts_icons/tracks/heavy_standard.png",tracksHeavyPremium:"img/screens/equipment_edit/parts_icons/tracks/heavy_premium.png",tracksHeavyDeluxe:"img/screens/equipment_edit/parts_icons/tracks/heavy_deluxe.png",bucketBasicStandard:"img/screens/equipment_edit/parts_icons/bucket/basic_standard.png",bucketBasicPremium:"img/screens/equipment_edit/parts_icons/bucket/basic_premium.png",bucketBasicDeluxe:"img/screens/equipment_edit/parts_icons/bucket/basic_deluxe.png",bucketMediumStandard:"img/screens/equipment_edit/parts_icons/bucket/medium_standard.png",bucketMediumPremium:"img/screens/equipment_edit/parts_icons/bucket/medium_premium.png",bucketMediumDeluxe:"img/screens/equipment_edit/parts_icons/bucket/medium_deluxe.png",bucketHeavyStandard:"img/screens/equipment_edit/parts_icons/bucket/heavy_standard.png",bucketHeavyPremium:"img/screens/equipment_edit/parts_icons/bucket/heavy_premium.png",bucketHeavyDeluxe:"img/screens/equipment_edit/parts_icons/bucket/heavy_deluxe.png",headlightsMediumStandard:"img/screens/equipment_edit/parts_icons/headlights/medium_standard.png",headlightsMediumPremium:"img/screens/equipment_edit/parts_icons/headlights/medium_premium.png",headlightsMediumDeluxe:"img/screens/equipment_edit/parts_icons/headlights/medium_deluxe.png",headlightsHeavyStandard:"img/screens/equipment_edit/parts_icons/headlights/heavy_standard.png",headlightsHeavyPremium:"img/screens/equipment_edit/parts_icons/headlights/heavy_premium.png",headlightsHeavyDeluxe:"img/screens/equipment_edit/parts_icons/headlights/heavy_deluxe.png",threePointHitchHeavyStandard:"img/screens/equipment_edit/parts_icons/threePointHitch/heavy_standard.png",threePointHitchHeavyPremium:"img/screens/equipment_edit/parts_icons/threePointHitch/heavy_premium.png",threePointHitchHeavyDeluxe:"img/screens/equipment_edit/parts_icons/threePointHitch/heavy_deluxe.png",powerTakeoffHeavyStandard:"img/screens/equipment_edit/parts_icons/powerTakeoff/heavy_standard.png",powerTakeoffHeavyPremium:"img/screens/equipment_edit/parts_icons/powerTakeoff/heavy_premium.png",powerTakeoffHeavyDeluxe:"img/screens/equipment_edit/parts_icons/powerTakeoff/heavy_deluxe.png",quickCouplerMediumStandard:"img/screens/equipment_edit/parts_icons/quickCoupler/medium_standard.png",quickCouplerMediumPremium:"img/screens/equipment_edit/parts_icons/quickCoupler/medium_premium.png",quickCouplerMediumDeluxe:"img/screens/equipment_edit/parts_icons/quickCoupler/medium_deluxe.png",quickCouplerHeavyStandard:"img/screens/equipment_edit/parts_icons/quickCoupler/heavy_standard.png",quickCouplerHeavyPremium:"img/screens/equipment_edit/parts_icons/quickCoupler/heavy_premium.png",quickCouplerHeavyDeluxe:"img/screens/equipment_edit/parts_icons/quickCoupler/heavy_deluxe.png",heaterStandard:"img/screens/equipment_edit/parts_icons/heater/standard.png",heaterPremium:"img/screens/equipment_edit/parts_icons/heater/premium.png",heaterDeluxe:"img/screens/equipment_edit/parts_icons/heater/deluxe.png",flameDecal:"img/screens/equipment_edit/parts_icons/extras/flame_decal.png",autoPilot:"img/screens/equipment_edit/parts_icons/extras/auto_pilot.png",stainlessExhaust:"img/screens/equipment_edit/parts_icons/extras/stainless_exhaust.png",gps:"img/screens/equipment_edit/parts_icons/extras/gps.png",tutorialGuy:"img/notifications/tutorial_guy.png",dealershipGirl:"img/notifications/dealership_girl.png",supplierGuy:"img/notifications/supplier_guy.png",tradeRouteAfricaNotification:"img/notifications/trade_route_africa.png",tradeRouteAsiaNotification:"img/notifications/trade_route_asia.png",tradeRouteEuropeNotification:"img/notifications/trade_route_europe.png",tradeRouteMiddleEastNotification:"img/notifications/trade_route_middle_east.png",tradeRouteSouthPacificNotification:"img/notifications/trade_route_south_pacific.png",tradeRouteSouthAmericaNotification:"img/notifications/trade_route_south_america.png",turnEnd01:"img/screens/turn_end/turn_end01.png",turnEnd02:"img/screens/turn_end/turn_end02.png"},sprites:{buttonManual:{url:"img/icons/settings.png",width:175,height:150,frames:2},buttonShare:{url:"img/icons/share.png",width:175,height:150,frames:2},buttonCancel:{url:"img/icons/cancel.png",width:175,height:150,frames:2},buttonConfirm:{url:"img/icons/confirm.png",width:175,height:150,frames:2},buttonBack:{url:"img/icons/back.png",width:175,height:150,frames:2},buttonUndo:{url:"img/icons/undo.png",width:175,height:150,frames:2},buttonEquipment:{url:"img/icons/equipment.png",width:175,height:150,frames:2},buttonInventory:{url:"img/icons/inventory.png",width:175,height:150,frames:2},ignitionKey:{url:"img/screens/start/key_spritesheet.png",width:320,height:573,frames:3},buttonHome:{url:"img/icons/home.png",width:150,height:50,frames:2},buttonPlus:{url:"img/icons/plus.png",width:150,height:50,frames:2},buttonMinus:{url:"img/icons/minus.png",width:150,height:50,frames:2},turnIndicators:{url:"img/turn_spritesheet.png",width:300,height:100,frames:10},usDetailTiles:{url:"img/screens/us_detail/us_detail_grid_icon.png",width:110,height:110,frames:5},animatedDollarIcon:{url:"img/screens/us_detail/animated_dollar_sign_white.png",width:65,height:100,frames:6},animatedPlusIcon:{url:"img/screens/us_detail/animated_plus_sign.png",width:65,height:100,frames:6},createTractorBasic:{url:"img/screens/equipment_add/tractor_basic.png",width:310,height:218,frames:2},createSkidsteerBasic:{url:"img/screens/equipment_add/skid_steer_basic.png",width:310,height:218,frames:2},createTractorMedium:{url:"img/screens/equipment_add/tractor_medium.png",width:310,height:218,frames:2},createSkidsteerMedium:{url:"img/screens/equipment_add/skid_steer_medium.png",width:310,height:218,frames:2},createTractorHeavy:{url:"img/screens/equipment_add/tractor_heavy.png",width:310,height:218,frames:2},createSkidsteerHeavy:{url:"img/screens/equipment_add/skid_steer_heavy.png",width:310,height:218,frames:2},starsThree:{url:"img/screens/equipment_edit/stars/stars_three_spritesheet.png",width:126,height:26,frames:4},starsFour:{url:"img/screens/equipment_edit/stars/stars_four_spritesheet.png",width:176,height:26,frames:5},starsFive:{url:"img/screens/equipment_edit/stars/stars_five_spritesheet.png",width:224,height:26,frames:6},starsSix:{url:"img/screens/equipment_edit/stars/stars_six_spritesheet.png",width:274,height:26,frames:7},starsSeven:{url:"img/screens/equipment_edit/stars/stars_seven_spritesheet.png",width:323,height:26,frames:8},editTractorBasicCab:{url:"img/screens/equipment_edit/machine_parts/tractor/basic/tractor_basic_cab_spritesheet.png",width:105,height:154,frames:2},editTractorBasicEngine:{url:"img/screens/equipment_edit/machine_parts/tractor/basic/tractor_basic_engine_spritesheet.png",width:167,height:189,frames:2},editTractorBasicTires:{url:"img/screens/equipment_edit/machine_parts/tractor/basic/tractor_basic_tires_spritesheet.png",width:308,height:196,frames:2},editTractorMediumCab:{url:"img/screens/equipment_edit/machine_parts/tractor/medium/tractor_medium_cab_spritesheet.png",width:83,height:177,frames:2},editTractorMediumEngine:{url:"img/screens/equipment_edit/machine_parts/tractor/medium/tractor_medium_engine_spritesheet.png",width:143,height:149,frames:2},editTractorMediumTransmission:{url:"img/screens/equipment_edit/machine_parts/tractor/medium/tractor_medium_transmission_spritesheet.png",width:26,height:83,frames:2},editTractorMediumTires:{url:"img/screens/equipment_edit/machine_parts/tractor/medium/tractor_medium_tires_spritesheet.png",width:288,height:255,frames:2},editTractorHeavyCab:{url:"img/screens/equipment_edit/machine_parts/tractor/heavy/tractor_heavy_cab_spritesheet.png",width:166,height:222,frames:2},editTractorHeavyEngine:{url:"img/screens/equipment_edit/machine_parts/tractor/heavy/tractor_heavy_engine_spritesheet.png",width:165,height:172,frames:2},editTractorHeavyTransmission:{url:"img/screens/equipment_edit/machine_parts/tractor/heavy/tractor_heavy_transmission_spritesheet.png",width:43,height:155,frames:2},editTractorHeavyTracks:{url:"img/screens/equipment_edit/machine_parts/tractor/heavy/tractor_heavy_tracks_spritesheet.png",width:300,height:170,frames:2},editSkidsteerBasicCab:{url:"img/screens/equipment_edit/machine_parts/skidsteer/basic/skidsteer_basic_cab_spritesheet.png",width:115,height:126,frames:2},editSkidsteerBasicBucket:{url:"img/screens/equipment_edit/machine_parts/skidsteer/basic/skidsteer_basic_bucket_spritesheet.png",width:207,height:145,frames:2},editSkidsteerBasicTires:{url:"img/screens/equipment_edit/machine_parts/skidsteer/basic/skidsteer_basic_tires_spritesheet.png",width:159,height:101,frames:2},editSkidsteerMediumCab:{url:"img/screens/equipment_edit/machine_parts/skidsteer/medium/skidsteer_medium_cab_spritesheet.png",width:142,height:129,frames:2},editSkidsteerMediumBucket:{url:"img/screens/equipment_edit/machine_parts/skidsteer/medium/skidsteer_medium_bucket_spritesheet.png",width:179,height:167,frames:2},editSkidsteerMediumTires:{url:"img/screens/equipment_edit/machine_parts/skidsteer/medium/skidsteer_medium_tires_spritesheet.png",width:78,height:86,frames:2},editSkidsteerHeavyCab:{url:"img/screens/equipment_edit/machine_parts/skidsteer/heavy/skidsteer_heavy_cab_spritesheet.png",width:156,height:108,frames:2},editSkidsteerHeavyEngine:{url:"img/screens/equipment_edit/machine_parts/skidsteer/heavy/skidsteer_heavy_engine_spritesheet.png",width:83,height:57,frames:2},editSkidsteerHeavyBucket:{url:"img/screens/equipment_edit/machine_parts/skidsteer/heavy/skidsteer_heavy_bucket_spritesheet.png",width:249,height:244,frames:2},editSkidsteerHeavyTracks:{url:"img/screens/equipment_edit/machine_parts/skidsteer/heavy/skidsteer_heavy_tracks_spritesheet.png",width:239,height:127,frames:2}}},stage:{fullScreen:!0,scaleMode:Phaser.ScaleManager.SHOW_ALL},attrs:{firstPlay:!1,turnActive:!1,turnTime:TIME_PER_TURN,turnCompleted:!1,levelPassed:!1,activeSector:-1,activeTile:null,activeFactor:null,activeMachine:null,activeMachineId:-1,activePartType:"",newMachine:!1,bank:1e6},palette:j,defaultScreen:"home",notificationText:p,goalsText:{passed:"All goals met.\nCongratulations.",failed:"Goals not met.\nPlease try again.",types:{profit:"Profits: ",newPlants:"Plants built: ",newDealerships:"Dealerships established: ",newSuppliers:"Partnered Suppliers: ",newTradeRoutes:"Trade Routes established: ",newMachineModels:"Machine models created: ",newMachines:"Machines built: ",machinesSold:"Machines sold: "}},bonusesText:{newPlant:"New Plant built created 1000 jobs",newDealership:"New Dealership established",newSupplier:"New Supplier relationship",newTradeRoutes:"New Trade Route established",machineManufacturing:"~{machines}~ Machines built"},machineIcons:{tractor:{basic:"tractorBasicIcon",medium:"tractorMediumIcon",heavy:"tractorHeavyIcon"},skidsteer:{basic:"skidsteerBasicIcon",medium:"skidsteerMediumIcon",heavy:"skidsteerHeavyIcon"}},dynamicViews:x,worldPositions:k,pinPositions:l,pinOffsets:m,pinImages:n,pinFills:o,tradeRouteArrowConfig:r,tradeRoutePinConfig:s,tradeRouteAlertIconConfig:t,notificationPeopleImages:q,starsConfig:u,machineEditBackgrounds:v,machinePieceSpriteConfig:w,views:{background:{name:"background",type:"group",views:{gameBg:{name:"gameBg",type:"sprite",img:"gameBg",x:0,y:0,attrs:{width:c,height:d,fixedToCamera:!0}}}},homeScreen:{name:"home",type:"group",attrs:{visible:!1},views:{stateBg:{type:"sprite",name:"homeBg",img:"homeBg",x:0,y:0,attrs:{width:e,height:f}},ignitionKey:{type:"sprite",name:"ignitionKey",img:"ignitionKey",x:0,y:0,attrs:{width:e,height:f},animation:{defaultAnimation:"idle",animations:Animations.ignitionKey}},startButton:{type:"button",name:"gameStartButton",img:"blockWhite",x:e/2-2.5*g,y:2.5*g,attrs:{width:5*g,height:5*g,alpha:0},callback:gameLogic.buttonCallbacks.worldStart,context:this,frames:[0,1,1,0]},manualButton:{type:"button",name:"manualbutton",img:"blockClear",x:0,y:f-2.5*g,attrs:{width:2.5*g,height:2.5*g,alpha:.75},callback:gameLogic.buttonCallbacks.manualStart,context:this,frames:[0,1,1,0]}}},manualScreen:{name:"manual",type:"group",attrs:{visible:!1},views:{stateBg:{type:"sprite",name:"manualBg",img:"manualBg",x:0,y:0,attrs:{width:e,height:f},input:gameLogic.input.manualBg},manualPages:{type:"group",name:"manualPages",views:{}}}},briefScreen:{name:"brief",type:"group",attrs:{visible:!1},views:{}},worldScreen:{name:"world",type:"group",attrs:{visible:!1},views:{oceanMap:{type:"sprite",name:"oceanMap",img:"mapOcean",x:0,y:0,attrs:{width:e,height:f,alpha:.75}},worldMap:{type:"sprite",name:"worldMap",img:"mapWorld",x:-(.805*e),y:-(1.947*f),attrs:{width:5.9*e,height:5.85*f}},usMap:{type:"sprite",name:"usMap",img:"mapUS",x:0,y:6*g,attrs:{width:e,height:5*g,fixedToCamera:!0}},buttons:{type:"group",name:"startStateButtons",attrs:{fixedToCamera:!0},views:{northwestDetail:{type:"button",name:"northwestDetail",img:"blockWhite",x:.2*g,y:6*g,attrs:{width:3.5*g,height:2*g,alpha:0},callback:gameLogic.buttonCallbacks.northwestDetail,context:this,frames:[0,0,0,0]},southwestDetail:{type:"button",name:"southwestDetail",img:"blockWhite",x:.2*g,y:8*g,attrs:{width:3.5*g,height:2*g,alpha:0},callback:gameLogic.buttonCallbacks.southwestDetail,context:this,frames:[0,0,0,0]},midwestDetail:{type:"button",name:"midwestDetail",img:"blockWhite",x:3.7*g,y:6*g,attrs:{width:2*g,height:4.5*g,alpha:0},callback:gameLogic.buttonCallbacks.midwestDetail,context:this,frames:[0,0,0,0]},northeastDetail:{type:"button",name:"northeastDetail",img:"blockWhite",x:5.7*g,y:6*g,attrs:{width:4*g,height:2.5*g,alpha:0},sector:USSectors.NORTH_EAST,callback:gameLogic.buttonCallbacks.northeastDetail,context:this,frames:[0,0,0,0]},southeastDetail:{type:"button",name:"southeastDetail",img:"blockWhite",x:5.7*g,y:8.5*g,attrs:{width:2.5*g,height:2.5*g,alpha:0},callback:gameLogic.buttonCallbacks.southeastDetail,context:this,frames:[0,0,0,0]}}}}},usDetailScreen:{name:"usDetail",type:"group",attrs:{visible:!1},views:{}},buildingEditScreen:{name:"buildingEdit",type:"group",attrs:{visible:!1},views:{}},equipmentListScreen:{name:"equipmentList",type:"group",attrs:{visible:!1},views:{buttons:{type:"group",name:"equipmentListScreenButtonGroup",attrs:{fixedToCamera:!0},views:{closeButton:{type:"button",name:"closeButton",img:"buttonClose",x:e-1.25*g,y:.25*g,attrs:{width:1*g,height:1*g},callback:gameLogic.buttonCallbacks.equipmentListClose,context:this,frames:[0,1,1,0]}}}}},equipmentCreateScreen:{name:"equipmentCreate",type:"group",attrs:{visible:!1},views:{bg:{type:"sprite",name:"createBg",img:"equipmentCreateBg",x:0,y:0,attrs:{width:e,height:f-1.5*g}},icons:{type:"group",name:"createIcons",views:{machineType:{type:"group",name:"machineType",views:{tractorBasic:{type:"button",name:"createTractorBasic",img:"createTractorBasic",x:e/2-4.5*g,y:1.5*g,attrs:{width:4*g,height:3*g},callback:gameLogic.buttonCallbacks.newBasicTractor,context:this,frames:[0,1,1,0]},tractorMedium:{type:"button",name:"createTractorMedium",img:"createTractorMedium",x:e/2-4.5*g,y:6*g,attrs:{width:4*g,height:3*g},callback:gameLogic.buttonCallbacks.newMediumTractor,context:this,frames:[0,1,1,0]},tractorHeavy:{type:"button",name:"createTractorHeavy",img:"createTractorHeavy",x:e/2-4.5*g,y:10.5*g,attrs:{width:4*g,height:3*g},callback:gameLogic.buttonCallbacks.newHeavyTractor,context:this,frames:[0,1,1,0]},skidsteerBasic:{type:"button",name:"createSkidsteerBasic",img:"createSkidsteerBasic",x:e/2+.5*g,y:1.5*g,attrs:{width:4*g,height:3*g},callback:gameLogic.buttonCallbacks.newBasicSkidsteer,context:this,frames:[0,1,1,0]},skidsteerMedium:{type:"button",name:"createSkidsteerMedium",img:"createSkidsteerMedium",x:e/2+.5*g,y:6*g,attrs:{width:4*g,height:3*g},callback:gameLogic.buttonCallbacks.newMediumSkidsteer,context:this,frames:[0,1,1,0]},skidsteerHeavy:{type:"button",name:"createSkidsteerHeavy",img:"createSkidsteerHeavy",x:e/2+.5*g,y:10.5*g,attrs:{width:4*g,height:3*g},callback:gameLogic.buttonCallbacks.newHeavySkidsteer,context:this,frames:[0,1,1,0]}}}}}}},equipmentEditScreen:{type:"group",name:"equipmentEdit",attrs:{visible:!1},views:{}},turnEndScreen:{type:"group",name:"turnEnd",attrs:{visible:!1},views:{openedEnvelope:{type:"sprite",name:"openedEnvelope",img:"turnEnd02",x:0,y:0,attrs:{width:e,height:f},input:gameLogic.input.openedEnvelope},closedEnvelope:{type:"sprite",name:"closedEnvelope",img:"turnEnd01",x:0,y:0,attrs:{width:e,height:f},input:gameLogic.input.closedEnvelope}}},global:{type:"group",name:"global",attrs:{visible:!0},views:{notificationEnvelope:{type:"sprite",name:"notificationEnvelope",img:"smallEnvelope",x:.1*g,y:1.6*g,attrs:{width:1.5*g,height:1.5*g*.6},input:gameLogic.input.notificationEnvelope},tradeRouteAlertIcon:{type:"sprite",name:"tradeRouteAlertIcon",img:"tradeRouteAlertIcon",x:e-1.35*g,y:1.6*g,attrs:{width:1.25*g,height:1.25*g*.89},input:gameLogic.input.tradeRouteAlertIcon},notifications:{name:"notifications",type:"group",views:{}},dashboardBottom:{name:"dashboardBottom",type:"sprite",img:"dashboardBottom",x:0,y:13.5*g,attrs:{width:1*e,height:2.5*g,fixedToCamera:!0}},homeGroup:{type:"group",name:"homeGroup",views:{buttonManual:{type:"button",name:"buttonManual",img:"buttonManual",x:h.left.x,y:h.bottom.y,attrs:{width:h.width,height:h.height},callback:gameLogic.buttonCallbacks.openManual,context:this,frames:[0,1,1,0]},buttonShare:{type:"button",name:"buttonShare",img:"buttonShare",x:h.right.x,y:h.bottom.y,attrs:{width:h.width,height:h.height},callback:gameLogic.buttonCallbacks.share,context:this,frames:[0,1,1,0]}}},turnGroup:{type:"group",name:"turnGroup",attrs:{visible:!1},views:{dashboardTop:{name:"dashboardTop",type:"sprite",img:"dashboardTop",x:0,y:0,attrs:{width:e,height:1.5*g,fixedToCamera:!0}},timerText:{type:"text",name:"timerText",text:TIME_PER_TURN,style:{font:i.lg+"px Trebuchet MS",fill:j.orange1},x:0,y:.2*g,position:{centerX:!0}},bankText:{type:"text",name:"bankText",text:"",style:{font:i.sm+"px Trebuchet MS",fill:j.orange1},x:.8*g,y:.5*g},bonusText:{type:"text",name:"bonusText",text:"",style:{font:i.md+"px Trebuchet MS",fill:j.orange1},x:6.33*g,y:.38*g},turnIndicator:{type:"sprite",name:"turnIndicator",img:"turnIndicators",x:e/2-1.2*g,y:.33*g,attrs:{width:2.4*g,height:2.5*g/3}},homeButton:{type:"button",name:"homeButton",img:"buttonHome",x:e/2-1*g,y:f-1*g,attrs:{width:2*g,height:2*g/3},callback:gameLogic.buttonCallbacks.worldReturnButton,context:this,frames:[0,1,1,0]}}},plusMinusGroup:{type:"group",name:"plusMinusGroup",attrs:{visible:!1},views:{plusButton:{type:"button",name:"plusButton",img:"buttonPlus",x:e/2-2.5*g,y:f-1*g,attrs:{width:2*g,height:2*g/3},callback:gameLogic.buttonCallbacks.plusButton,context:this,frames:[0,1,1,0]},minusButton:{type:"button",name:"minusButton",img:"buttonMinus",x:e/2+.5*g,y:f-1*g,attrs:{width:2*g,height:2*g/3},callback:gameLogic.buttonCallbacks.minusButton,context:this,frames:[0,1,1,0]}}},plantDetailGroup:{type:"group",name:"plantDetailGroup",attrs:{visible:!1},views:{equipmentButton:{type:"button",name:"equipmentButton",img:"buttonEquipment",x:h.right.x,y:h.bottom.y,attrs:{width:h.width,height:h.height},callback:gameLogic.buttonCallbacks.equipmentListStart,context:this,frames:[0,0,0,0]}}},equipmentListGroup:{type:"group",name:"equipmentListGroup",attrs:{visible:!1},views:{}},equipmentEditGroup:{type:"group",name:"equipmentEditGroup",attrs:{visible:!1},views:{}},backButton:{type:"button",name:"backButton",img:"buttonBack",x:h.left.x,y:h.bottom.y,attrs:{width:h.width,height:h.height},callback:gameLogic.buttonCallbacks.backButton,context:this,frames:[0,1,1,0]},confirmButton:{type:"button",name:"confirmButton",img:"buttonConfirm",x:h.right.x,y:h.bottom.y,attrs:{width:h.width,height:h.height},callback:gameLogic.buttonCallbacks.confirmButton,context:this,frames:[0,1,1,0]},cancelButton:{type:"button",name:"cancelButton",img:"buttonCancel",x:h.left.x,y:h.bottom.y,attrs:{width:h.width,height:h.height},callback:gameLogic.buttonCallbacks.cancelButton,context:this,frames:[0,1,1,0]}}}},turnScreens:["world","usDetail","buildingEdit","equipmentList","equipmentCreate","equipmentEdit"],tutorial:{title:"Global Trader 3.0\nCNH INDUSTRIAL",subtitle:"Instructions and Strategy\nDIGITAL TRADE TOOLBOX",pages:[{blurbs:[{text:"Click on the ignition\nto start the game.",x:2*g,y:3*g},{text:"Look over the Mission Brief.\nThese are the goals you will\nneed to accomplish\nfor the year.\n\nPress the check button\nto begin the turn.",x:4.5*g,y:7.5*g}],images:[{img:"ssIgnition",x:6*g,y:3*g,width:2*g,height:2*g*1.78},{img:"ssGoals",x:2*g,y:7.5*g,width:2*g,height:2*g*1.76}]},{blurbs:[{text:"Each level is one year.\nThe 52 weeks of the\nyear countdown the turn.\nThe yellow dots reflect\nthe current year.",x:2*g,y:3*g},{text:"Choose a sector of the US to view.",x:2*g,y:5*g},{text:"Click on the grid to build a plant.",x:2*g,y:7*g},{text:"The plant completes\nconstruction in 3 weeks.\nIt is then active.\nYou can start making\nequipment.",x:2*g,y:10*g}],images:[{img:"ssYearIndicators",x:6*g,y:3*g,width:1.5*g,height:1.5*g*.54},{img:"ssUsSector",x:2*g,y:5.5*g,width:2*g,height:2*g*.65},{img:"ssGrid",x:2*g,y:7.8*g,width:2*g,height:2*g},{img:"ssPlant",x:6*g,y:10*g,width:1*g,height:1*g*.96}]},{blurbs:[{text:"Click on the active plant\nto see its details.\nThe wrench takes\nyou a list of the\nplant's\nTractor and\nSkid Steer models.",x:2*g,y:3*g},{text:"Click an empty slot\nto add a new model.",x:4.5*g,y:7.5*g},{text:"Choose the type and\nthe size to build.",x:2*g,y:10*g}],images:[{img:"ssPlantDetails",x:5.5*g,y:3*g,width:2.5*g,height:2.5*g*1.58},{img:"ssEmptySlot",x:2*g,y:7.5*g,width:2*g,height:2*g*.85},{img:"ssTractorMedium",x:5.5*g,y:10*g,width:2*g,height:2*g*.79}]},{blurbs:[{text:"Required parts are displayed above.\nClick to open the parts menu.",x:2*g,y:3*g},{text:"The choice of parts will affect\nthe manufacturing cost of a machine.",x:2*g,y:6*g},{text:"There may be Parts Supplier oppurtunities.\nBuy in bulk to save on manufacturing\ncosts later.",x:2*g,y:10*g}],images:[{img:"ssPartsNavigator",x:2*g,y:4*g,width:4*g,height:4*g*.29},{img:"ssPartsMenu",x:2*g,y:7*g,width:2*g,height:2*g*1.33}]},{blurbs:[{text:"The stars turn from grey to yellow as you\nselect each required machine type part.",x:2*g,y:3*g},{text:"After a Plant has manufactured 3 machines,\nRegional Representatives will prompt\nyou to sell through their Dealership.",x:2*g,y:5.5*g},{text:"Not all Dealerships offer the same resale.\nThe first is not always the best.",x:2*g,y:11*g}],images:[{img:"ssDealershipGirl",x:2*g,y:7*g,width:2*g,height:2*g*1.67},{img:"ssStars",x:2*g,y:4*g,width:4*g,height:4*g*.2}]},{blurbs:[{text:"After you sell domestically you,\nmay receive trade opportunities\nleading to increased revenue\nand bonus points.",x:2*g,y:3*g},{text:"Clicking the prompt returns to\nthe world map and displays\nthe potential trade route.",x:2*g,y:5*g},{text:"Click the trade route to see\nthe Trade Representative's offer.",x:2*g,y:9.5*g},{text:"Accepting is optional.\nSome trade routes are better than others!",x:2*g,y:10.5*g}],images:[{img:"tradeRouteAlertIcon",x:7*g,y:3*g,width:1.5*g,height:1.5*g*.89},{img:"ssTradeRoutes",x:2*g,y:6.5*g,width:4*g,height:4*g*.68}]},{blurbs:[{text:"Keep track of your bank\nthe turn time,\nand the Bonus Points\nin the top dashboard.",x:2*g,y:3*g},{text:"At the end of the year, an envelope\nwill contain the Year End summary.\nWhen all goals are met,\nyou can advance to the next level.",x:2*g,y:6*g}],images:[{img:"ssDashboardTop",x:2*g,y:4.5*g,width:4.5*g,height:4.5*g*.17},{img:"ssYearEnd",x:2*g,y:7.5*g,width:3*g,height:3*g*1.3}]}]}};
a.call(b,y)},a}();
//# sourceMappingURL=global_trader.min.js.map